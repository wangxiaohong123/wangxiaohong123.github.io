<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>linux-4.vi | 王小红的笔记</title><meta name=keywords content="linux"><meta name=description content="比vi好用的编辑器有很多，比如nano，但是不是所有发行版都内置除vi意外的编辑器。最重要的是很多软件的编辑接口都会主动调用vi，比如crontab、visudo，所以vi是最重要的。vim是vi的升级版，他会根据文件的扩展名和文件内的开头信息显示对应的语法样式，其实感觉就是多个颜色、下划线等样式，缩进啥的还是很痛苦。
大部分的发行版都用vim替换vi了，如果输入alias时出现**alias vi=&lsquo;vim&rsquo;**表示执行vi就是在执行vim，否则还是要手动执行vim。
vi分为3中模式：

一般命令模式：vi 文件名 就进入一般命令模式了，简称一般模式，在这个模式里可以使用上下左右移动光标，删除字符或者删除整行，也可以使用复制粘贴；
编辑模式：一般模式不能编辑，直到按下【i、l、o、O、a、A、r、R】任意一个字母才会进入编辑模式，一般编辑模式屏幕左下方会出现insert、replace等字样，按【esc】退出编辑模式；
命令模式：在一般模式下输入【:、/、?】任意一个进入命令模式，在这个模式里可以查找数据、保存、批量替换、退出vi、显示行号等操作；

一般命令模式的按键：

  
      
          移动光标方法
          可以使用数字加命令，比如30↓就是向下移动30个字符
      
  
  
      
          h或者←
          光标向左移动一个字符
      
      
          j或者↓
          光标向下移动一个字符
      
      
          k或者↑
          光标向上移动一个字符
      
      
          l或者→
          光标向右移动一个字符
      
      
          ctrl+f
          屏幕向下翻页
      
      
          ctrl+b
          屏幕向上翻页
      
      
          ctrl+d
          屏幕向下翻半页
      
      
          ctrl+u
          屏幕向上翻半页
      
      
          +
          光标移动到非空格的下一行
      
      
          -
          光标移动到非空格的上一行
      
      
          N + 空格
          n是数字，光标向右移动n个字符
      
      
          0或者home键
          移动到这一行的第一个字符位置，这个是数字0
      
      
          $或者end键
          移动到这一行的最后一个字符位置
      
      
          H
          移动到屏幕最上方第一行第一个字符
      
      
          M
          移动到屏幕中央那行的第一个字符
      
      
          L
          移动到屏幕最下方最后一行的第一个字符
      
      
          G
          移动到文件的最后一行
      
      
          nG
          n是数字，移动到文件的第n行
      
      
          gg
          移动到文件的第一行，相当于1G
      
      
          n + 回车
          n是数字，光标向下移动n行
      
      
          查找和替换
          
      
      
          /word
          向光标之下查找第一个名为word的字符串
      
      
          ?word
          向光标之上查找第一个名为word的字符串
      
      
          n
          n是按键，代表重复前一个查找的操作，比如/word之后在按n就是继续查找
      
      
          N
          N是按键，和n相反，反向前一个查找的操作，/word会变成?word
      
      
          :n1,n2/word1/word2/g
          n1和n2是数字，在第n1和n2行之间查找word1，并把word1替换成word2
      
      
          :1,$s/word1/word2/g
          从第1行到最后一行之间查找word1，并把word1替换成word2
      
      
          :1,$s/word1/word2/gc
          从第1行到最后一行之间查找word1，并把word1替换成word2，且在替换前给用户显示确认提示字符
      
      
          删除，复制和粘贴
          
      
      
          x、X
          x表示向后删除一个字符，X表示向前删除一个字符
      
      
          nx
          n是数字，向后删除n个字符
      
      
          dd
          删除光标所在一整行
      
      
          ndd
          n是数字，向下删除光标所在的下n行
      
      
          d1G
          删除光标到第一行的所有数据
      
      
          dG
          删除光标到最后一行的所有数据
      
      
          d$
          删除光标所在位置到这行最后一个字符
      
      
          d0
          删除光标所在位置到这行第一个字符
      
      
          yy
          复制光标所在行
      
      
          nyy
          n是数字，复制光标所在行的下n行
      
      
          y1G
          复制光标所在行到第一行的所有数据
      
      
          yG
          复制光标所在行到最后一行的所有数据
      
      
          y0
          复制光标所在字符到行首的所有数据
      
      
          y$
          复制光标所在字符到行尾的所有数据
      
      
          p、P
          p是把复制的数据在光标下一行粘贴，P是在上一行粘贴
      
      
          J
          把光标所在行和下一行合成同一行
      
      
          c
          删除重复多个数据
      
      
          u
          恢复前一个操作
      
      
          ctrl + r
          重做上一个操作
      
  

一般命令模式切换到编辑模式的按键：

  
      
          i和I
          插入，i是从光标处开始插入，I是从光标所在行的第一个非空格开始插入
      
  
  
      
          a和A
          插入，a是从光标所在的下一个字符开始插入，A是光标所在行的最后一个字符开始插入
      
      
          o和O
          o是在光标所在行的下一行插入一个新空行，O是在上一行插入一个空行
      
      
          r和R
          r会替换光标所在的字符，R会一直替换光标所在的字符，直到按下esc键
      
      
          esc
          退出编辑模式
      
  

一般命令模式切换到命令模式的按键

  
      
          :w
          将编辑的数据写入到硬盘
      
  
  
      
          :w!
          如果文件的权限是只读，强制写入，能不能强制跟你对该文件的权限有关
      
      
          :q
          退出
      
      
          :q!
          强制退出，不保存
      
      
          :wq
          保存后退出，如果是:wq!就是强制保存退出
      
      
          ZZ
          和:wq的效果一样
      
      
          :w [filename]
          另存为
      
      
          :r [filename]
          把文件内容加载到光标所在行后面
      
      
          :n1,n2 w [filename]
          把n1到n2的内容另存为新文件
      
      
          :! command
          暂时退出vi到命令模式下执行command的显示结果例如【:! ls /home】就是在vi中查看/home下面以ls输出文件信息
      
      
          :set nu(针对vim)
          显示行号
      
      
          :set nonu(针对vim)
          取消行号
      
  

vim的缓存
vim防止某些原因导致的程序异常退出的情况会在编辑文件时创建一个.filename.swp的文件，这个文件里缓存了对filename的操作，如果打开文件之前出现了.swp文件就会报错，说什么found a swap file之类的，出现这个错误可能有两种情况：第一个就是多人维护同一个文件，第二个就是异常退出了。"><meta name=author content><link rel=canonical href=https://wangxiaohong123.github.io/posts/linux/4.vi/><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://wangxiaohong123.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wangxiaohong123.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wangxiaohong123.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wangxiaohong123.github.io/apple-touch-icon.png><link rel=mask-icon href=https://wangxiaohong123.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://wangxiaohong123.github.io/posts/linux/4.vi/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wangxiaohong123.github.io/posts/linux/4.vi/"><meta property="og:site_name" content="王小红的笔记"><meta property="og:title" content="linux-4.vi"><meta property="og:description" content="比vi好用的编辑器有很多，比如nano，但是不是所有发行版都内置除vi意外的编辑器。最重要的是很多软件的编辑接口都会主动调用vi，比如crontab、visudo，所以vi是最重要的。vim是vi的升级版，他会根据文件的扩展名和文件内的开头信息显示对应的语法样式，其实感觉就是多个颜色、下划线等样式，缩进啥的还是很痛苦。
大部分的发行版都用vim替换vi了，如果输入alias时出现**alias vi=‘vim’**表示执行vi就是在执行vim，否则还是要手动执行vim。
vi分为3中模式：
一般命令模式：vi 文件名 就进入一般命令模式了，简称一般模式，在这个模式里可以使用上下左右移动光标，删除字符或者删除整行，也可以使用复制粘贴； 编辑模式：一般模式不能编辑，直到按下【i、l、o、O、a、A、r、R】任意一个字母才会进入编辑模式，一般编辑模式屏幕左下方会出现insert、replace等字样，按【esc】退出编辑模式； 命令模式：在一般模式下输入【:、/、?】任意一个进入命令模式，在这个模式里可以查找数据、保存、批量替换、退出vi、显示行号等操作； 一般命令模式的按键： 移动光标方法 可以使用数字加命令，比如30↓就是向下移动30个字符 h或者← 光标向左移动一个字符 j或者↓ 光标向下移动一个字符 k或者↑ 光标向上移动一个字符 l或者→ 光标向右移动一个字符 ctrl+f 屏幕向下翻页 ctrl+b 屏幕向上翻页 ctrl+d 屏幕向下翻半页 ctrl+u 屏幕向上翻半页 + 光标移动到非空格的下一行 - 光标移动到非空格的上一行 N + 空格 n是数字，光标向右移动n个字符 0或者home键 移动到这一行的第一个字符位置，这个是数字0 $或者end键 移动到这一行的最后一个字符位置 H 移动到屏幕最上方第一行第一个字符 M 移动到屏幕中央那行的第一个字符 L 移动到屏幕最下方最后一行的第一个字符 G 移动到文件的最后一行 nG n是数字，移动到文件的第n行 gg 移动到文件的第一行，相当于1G n + 回车 n是数字，光标向下移动n行 查找和替换 /word 向光标之下查找第一个名为word的字符串 ?word 向光标之上查找第一个名为word的字符串 n n是按键，代表重复前一个查找的操作，比如/word之后在按n就是继续查找 N N是按键，和n相反，反向前一个查找的操作，/word会变成?word :n1,n2/word1/word2/g n1和n2是数字，在第n1和n2行之间查找word1，并把word1替换成word2 :1,$s/word1/word2/g 从第1行到最后一行之间查找word1，并把word1替换成word2 :1,$s/word1/word2/gc 从第1行到最后一行之间查找word1，并把word1替换成word2，且在替换前给用户显示确认提示字符 删除，复制和粘贴 x、X x表示向后删除一个字符，X表示向前删除一个字符 nx n是数字，向后删除n个字符 dd 删除光标所在一整行 ndd n是数字，向下删除光标所在的下n行 d1G 删除光标到第一行的所有数据 dG 删除光标到最后一行的所有数据 d$ 删除光标所在位置到这行最后一个字符 d0 删除光标所在位置到这行第一个字符 yy 复制光标所在行 nyy n是数字，复制光标所在行的下n行 y1G 复制光标所在行到第一行的所有数据 yG 复制光标所在行到最后一行的所有数据 y0 复制光标所在字符到行首的所有数据 y$ 复制光标所在字符到行尾的所有数据 p、P p是把复制的数据在光标下一行粘贴，P是在上一行粘贴 J 把光标所在行和下一行合成同一行 c 删除重复多个数据 u 恢复前一个操作 ctrl + r 重做上一个操作 一般命令模式切换到编辑模式的按键： i和I 插入，i是从光标处开始插入，I是从光标所在行的第一个非空格开始插入 a和A 插入，a是从光标所在的下一个字符开始插入，A是光标所在行的最后一个字符开始插入 o和O o是在光标所在行的下一行插入一个新空行，O是在上一行插入一个空行 r和R r会替换光标所在的字符，R会一直替换光标所在的字符，直到按下esc键 esc 退出编辑模式 一般命令模式切换到命令模式的按键 :w 将编辑的数据写入到硬盘 :w! 如果文件的权限是只读，强制写入，能不能强制跟你对该文件的权限有关 :q 退出 :q! 强制退出，不保存 :wq 保存后退出，如果是:wq!就是强制保存退出 ZZ 和:wq的效果一样 :w [filename] 另存为 :r [filename] 把文件内容加载到光标所在行后面 :n1,n2 w [filename] 把n1到n2的内容另存为新文件 :! command 暂时退出vi到命令模式下执行command的显示结果例如【:! ls /home】就是在vi中查看/home下面以ls输出文件信息 :set nu(针对vim) 显示行号 :set nonu(针对vim) 取消行号 vim的缓存 vim防止某些原因导致的程序异常退出的情况会在编辑文件时创建一个.filename.swp的文件，这个文件里缓存了对filename的操作，如果打开文件之前出现了.swp文件就会报错，说什么found a swap file之类的，出现这个错误可能有两种情况：第一个就是多人维护同一个文件，第二个就是异常退出了。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:tag" content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="linux-4.vi"><meta name=twitter:description content="比vi好用的编辑器有很多，比如nano，但是不是所有发行版都内置除vi意外的编辑器。最重要的是很多软件的编辑接口都会主动调用vi，比如crontab、visudo，所以vi是最重要的。vim是vi的升级版，他会根据文件的扩展名和文件内的开头信息显示对应的语法样式，其实感觉就是多个颜色、下划线等样式，缩进啥的还是很痛苦。
大部分的发行版都用vim替换vi了，如果输入alias时出现**alias vi=&lsquo;vim&rsquo;**表示执行vi就是在执行vim，否则还是要手动执行vim。
vi分为3中模式：

一般命令模式：vi 文件名 就进入一般命令模式了，简称一般模式，在这个模式里可以使用上下左右移动光标，删除字符或者删除整行，也可以使用复制粘贴；
编辑模式：一般模式不能编辑，直到按下【i、l、o、O、a、A、r、R】任意一个字母才会进入编辑模式，一般编辑模式屏幕左下方会出现insert、replace等字样，按【esc】退出编辑模式；
命令模式：在一般模式下输入【:、/、?】任意一个进入命令模式，在这个模式里可以查找数据、保存、批量替换、退出vi、显示行号等操作；

一般命令模式的按键：

  
      
          移动光标方法
          可以使用数字加命令，比如30↓就是向下移动30个字符
      
  
  
      
          h或者←
          光标向左移动一个字符
      
      
          j或者↓
          光标向下移动一个字符
      
      
          k或者↑
          光标向上移动一个字符
      
      
          l或者→
          光标向右移动一个字符
      
      
          ctrl+f
          屏幕向下翻页
      
      
          ctrl+b
          屏幕向上翻页
      
      
          ctrl+d
          屏幕向下翻半页
      
      
          ctrl+u
          屏幕向上翻半页
      
      
          +
          光标移动到非空格的下一行
      
      
          -
          光标移动到非空格的上一行
      
      
          N + 空格
          n是数字，光标向右移动n个字符
      
      
          0或者home键
          移动到这一行的第一个字符位置，这个是数字0
      
      
          $或者end键
          移动到这一行的最后一个字符位置
      
      
          H
          移动到屏幕最上方第一行第一个字符
      
      
          M
          移动到屏幕中央那行的第一个字符
      
      
          L
          移动到屏幕最下方最后一行的第一个字符
      
      
          G
          移动到文件的最后一行
      
      
          nG
          n是数字，移动到文件的第n行
      
      
          gg
          移动到文件的第一行，相当于1G
      
      
          n + 回车
          n是数字，光标向下移动n行
      
      
          查找和替换
          
      
      
          /word
          向光标之下查找第一个名为word的字符串
      
      
          ?word
          向光标之上查找第一个名为word的字符串
      
      
          n
          n是按键，代表重复前一个查找的操作，比如/word之后在按n就是继续查找
      
      
          N
          N是按键，和n相反，反向前一个查找的操作，/word会变成?word
      
      
          :n1,n2/word1/word2/g
          n1和n2是数字，在第n1和n2行之间查找word1，并把word1替换成word2
      
      
          :1,$s/word1/word2/g
          从第1行到最后一行之间查找word1，并把word1替换成word2
      
      
          :1,$s/word1/word2/gc
          从第1行到最后一行之间查找word1，并把word1替换成word2，且在替换前给用户显示确认提示字符
      
      
          删除，复制和粘贴
          
      
      
          x、X
          x表示向后删除一个字符，X表示向前删除一个字符
      
      
          nx
          n是数字，向后删除n个字符
      
      
          dd
          删除光标所在一整行
      
      
          ndd
          n是数字，向下删除光标所在的下n行
      
      
          d1G
          删除光标到第一行的所有数据
      
      
          dG
          删除光标到最后一行的所有数据
      
      
          d$
          删除光标所在位置到这行最后一个字符
      
      
          d0
          删除光标所在位置到这行第一个字符
      
      
          yy
          复制光标所在行
      
      
          nyy
          n是数字，复制光标所在行的下n行
      
      
          y1G
          复制光标所在行到第一行的所有数据
      
      
          yG
          复制光标所在行到最后一行的所有数据
      
      
          y0
          复制光标所在字符到行首的所有数据
      
      
          y$
          复制光标所在字符到行尾的所有数据
      
      
          p、P
          p是把复制的数据在光标下一行粘贴，P是在上一行粘贴
      
      
          J
          把光标所在行和下一行合成同一行
      
      
          c
          删除重复多个数据
      
      
          u
          恢复前一个操作
      
      
          ctrl + r
          重做上一个操作
      
  

一般命令模式切换到编辑模式的按键：

  
      
          i和I
          插入，i是从光标处开始插入，I是从光标所在行的第一个非空格开始插入
      
  
  
      
          a和A
          插入，a是从光标所在的下一个字符开始插入，A是光标所在行的最后一个字符开始插入
      
      
          o和O
          o是在光标所在行的下一行插入一个新空行，O是在上一行插入一个空行
      
      
          r和R
          r会替换光标所在的字符，R会一直替换光标所在的字符，直到按下esc键
      
      
          esc
          退出编辑模式
      
  

一般命令模式切换到命令模式的按键

  
      
          :w
          将编辑的数据写入到硬盘
      
  
  
      
          :w!
          如果文件的权限是只读，强制写入，能不能强制跟你对该文件的权限有关
      
      
          :q
          退出
      
      
          :q!
          强制退出，不保存
      
      
          :wq
          保存后退出，如果是:wq!就是强制保存退出
      
      
          ZZ
          和:wq的效果一样
      
      
          :w [filename]
          另存为
      
      
          :r [filename]
          把文件内容加载到光标所在行后面
      
      
          :n1,n2 w [filename]
          把n1到n2的内容另存为新文件
      
      
          :! command
          暂时退出vi到命令模式下执行command的显示结果例如【:! ls /home】就是在vi中查看/home下面以ls输出文件信息
      
      
          :set nu(针对vim)
          显示行号
      
      
          :set nonu(针对vim)
          取消行号
      
  

vim的缓存
vim防止某些原因导致的程序异常退出的情况会在编辑文件时创建一个.filename.swp的文件，这个文件里缓存了对filename的操作，如果打开文件之前出现了.swp文件就会报错，说什么found a swap file之类的，出现这个错误可能有两种情况：第一个就是多人维护同一个文件，第二个就是异常退出了。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wangxiaohong123.github.io/posts/"},{"@type":"ListItem","position":2,"name":"linux-4.vi","item":"https://wangxiaohong123.github.io/posts/linux/4.vi/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"linux-4.vi","name":"linux-4.vi","description":"比vi好用的编辑器有很多，比如nano，但是不是所有发行版都内置除vi意外的编辑器。最重要的是很多软件的编辑接口都会主动调用vi，比如crontab、visudo，所以vi是最重要的。vim是vi的升级版，他会根据文件的扩展名和文件内的开头信息显示对应的语法样式，其实感觉就是多个颜色、下划线等样式，缩进啥的还是很痛苦。\n大部分的发行版都用vim替换vi了，如果输入alias时出现**alias vi=\u0026lsquo;vim\u0026rsquo;**表示执行vi就是在执行vim，否则还是要手动执行vim。\nvi分为3中模式：\n一般命令模式：vi 文件名 就进入一般命令模式了，简称一般模式，在这个模式里可以使用上下左右移动光标，删除字符或者删除整行，也可以使用复制粘贴； 编辑模式：一般模式不能编辑，直到按下【i、l、o、O、a、A、r、R】任意一个字母才会进入编辑模式，一般编辑模式屏幕左下方会出现insert、replace等字样，按【esc】退出编辑模式； 命令模式：在一般模式下输入【:、/、?】任意一个进入命令模式，在这个模式里可以查找数据、保存、批量替换、退出vi、显示行号等操作； 一般命令模式的按键： 移动光标方法 可以使用数字加命令，比如30↓就是向下移动30个字符 h或者← 光标向左移动一个字符 j或者↓ 光标向下移动一个字符 k或者↑ 光标向上移动一个字符 l或者→ 光标向右移动一个字符 ctrl+f 屏幕向下翻页 ctrl+b 屏幕向上翻页 ctrl+d 屏幕向下翻半页 ctrl+u 屏幕向上翻半页 + 光标移动到非空格的下一行 - 光标移动到非空格的上一行 N + 空格 n是数字，光标向右移动n个字符 0或者home键 移动到这一行的第一个字符位置，这个是数字0 $或者end键 移动到这一行的最后一个字符位置 H 移动到屏幕最上方第一行第一个字符 M 移动到屏幕中央那行的第一个字符 L 移动到屏幕最下方最后一行的第一个字符 G 移动到文件的最后一行 nG n是数字，移动到文件的第n行 gg 移动到文件的第一行，相当于1G n + 回车 n是数字，光标向下移动n行 查找和替换 /word 向光标之下查找第一个名为word的字符串 ?word 向光标之上查找第一个名为word的字符串 n n是按键，代表重复前一个查找的操作，比如/word之后在按n就是继续查找 N N是按键，和n相反，反向前一个查找的操作，/word会变成?word :n1,n2/word1/word2/g n1和n2是数字，在第n1和n2行之间查找word1，并把word1替换成word2 :1,$s/word1/word2/g 从第1行到最后一行之间查找word1，并把word1替换成word2 :1,$s/word1/word2/gc 从第1行到最后一行之间查找word1，并把word1替换成word2，且在替换前给用户显示确认提示字符 删除，复制和粘贴 x、X x表示向后删除一个字符，X表示向前删除一个字符 nx n是数字，向后删除n个字符 dd 删除光标所在一整行 ndd n是数字，向下删除光标所在的下n行 d1G 删除光标到第一行的所有数据 dG 删除光标到最后一行的所有数据 d$ 删除光标所在位置到这行最后一个字符 d0 删除光标所在位置到这行第一个字符 yy 复制光标所在行 nyy n是数字，复制光标所在行的下n行 y1G 复制光标所在行到第一行的所有数据 yG 复制光标所在行到最后一行的所有数据 y0 复制光标所在字符到行首的所有数据 y$ 复制光标所在字符到行尾的所有数据 p、P p是把复制的数据在光标下一行粘贴，P是在上一行粘贴 J 把光标所在行和下一行合成同一行 c 删除重复多个数据 u 恢复前一个操作 ctrl + r 重做上一个操作 一般命令模式切换到编辑模式的按键： i和I 插入，i是从光标处开始插入，I是从光标所在行的第一个非空格开始插入 a和A 插入，a是从光标所在的下一个字符开始插入，A是光标所在行的最后一个字符开始插入 o和O o是在光标所在行的下一行插入一个新空行，O是在上一行插入一个空行 r和R r会替换光标所在的字符，R会一直替换光标所在的字符，直到按下esc键 esc 退出编辑模式 一般命令模式切换到命令模式的按键 :w 将编辑的数据写入到硬盘 :w! 如果文件的权限是只读，强制写入，能不能强制跟你对该文件的权限有关 :q 退出 :q! 强制退出，不保存 :wq 保存后退出，如果是:wq!就是强制保存退出 ZZ 和:wq的效果一样 :w [filename] 另存为 :r [filename] 把文件内容加载到光标所在行后面 :n1,n2 w [filename] 把n1到n2的内容另存为新文件 :! command 暂时退出vi到命令模式下执行command的显示结果例如【:! ls /home】就是在vi中查看/home下面以ls输出文件信息 :set nu(针对vim) 显示行号 :set nonu(针对vim) 取消行号 vim的缓存 vim防止某些原因导致的程序异常退出的情况会在编辑文件时创建一个.filename.swp的文件，这个文件里缓存了对filename的操作，如果打开文件之前出现了.swp文件就会报错，说什么found a swap file之类的，出现这个错误可能有两种情况：第一个就是多人维护同一个文件，第二个就是异常退出了。\n","keywords":["linux"],"articleBody":"比vi好用的编辑器有很多，比如nano，但是不是所有发行版都内置除vi意外的编辑器。最重要的是很多软件的编辑接口都会主动调用vi，比如crontab、visudo，所以vi是最重要的。vim是vi的升级版，他会根据文件的扩展名和文件内的开头信息显示对应的语法样式，其实感觉就是多个颜色、下划线等样式，缩进啥的还是很痛苦。\n大部分的发行版都用vim替换vi了，如果输入alias时出现**alias vi=‘vim’**表示执行vi就是在执行vim，否则还是要手动执行vim。\nvi分为3中模式：\n一般命令模式：vi 文件名 就进入一般命令模式了，简称一般模式，在这个模式里可以使用上下左右移动光标，删除字符或者删除整行，也可以使用复制粘贴； 编辑模式：一般模式不能编辑，直到按下【i、l、o、O、a、A、r、R】任意一个字母才会进入编辑模式，一般编辑模式屏幕左下方会出现insert、replace等字样，按【esc】退出编辑模式； 命令模式：在一般模式下输入【:、/、?】任意一个进入命令模式，在这个模式里可以查找数据、保存、批量替换、退出vi、显示行号等操作； 一般命令模式的按键： 移动光标方法 可以使用数字加命令，比如30↓就是向下移动30个字符 h或者← 光标向左移动一个字符 j或者↓ 光标向下移动一个字符 k或者↑ 光标向上移动一个字符 l或者→ 光标向右移动一个字符 ctrl+f 屏幕向下翻页 ctrl+b 屏幕向上翻页 ctrl+d 屏幕向下翻半页 ctrl+u 屏幕向上翻半页 + 光标移动到非空格的下一行 - 光标移动到非空格的上一行 N + 空格 n是数字，光标向右移动n个字符 0或者home键 移动到这一行的第一个字符位置，这个是数字0 $或者end键 移动到这一行的最后一个字符位置 H 移动到屏幕最上方第一行第一个字符 M 移动到屏幕中央那行的第一个字符 L 移动到屏幕最下方最后一行的第一个字符 G 移动到文件的最后一行 nG n是数字，移动到文件的第n行 gg 移动到文件的第一行，相当于1G n + 回车 n是数字，光标向下移动n行 查找和替换 /word 向光标之下查找第一个名为word的字符串 ?word 向光标之上查找第一个名为word的字符串 n n是按键，代表重复前一个查找的操作，比如/word之后在按n就是继续查找 N N是按键，和n相反，反向前一个查找的操作，/word会变成?word :n1,n2/word1/word2/g n1和n2是数字，在第n1和n2行之间查找word1，并把word1替换成word2 :1,$s/word1/word2/g 从第1行到最后一行之间查找word1，并把word1替换成word2 :1,$s/word1/word2/gc 从第1行到最后一行之间查找word1，并把word1替换成word2，且在替换前给用户显示确认提示字符 删除，复制和粘贴 x、X x表示向后删除一个字符，X表示向前删除一个字符 nx n是数字，向后删除n个字符 dd 删除光标所在一整行 ndd n是数字，向下删除光标所在的下n行 d1G 删除光标到第一行的所有数据 dG 删除光标到最后一行的所有数据 d$ 删除光标所在位置到这行最后一个字符 d0 删除光标所在位置到这行第一个字符 yy 复制光标所在行 nyy n是数字，复制光标所在行的下n行 y1G 复制光标所在行到第一行的所有数据 yG 复制光标所在行到最后一行的所有数据 y0 复制光标所在字符到行首的所有数据 y$ 复制光标所在字符到行尾的所有数据 p、P p是把复制的数据在光标下一行粘贴，P是在上一行粘贴 J 把光标所在行和下一行合成同一行 c 删除重复多个数据 u 恢复前一个操作 ctrl + r 重做上一个操作 一般命令模式切换到编辑模式的按键： i和I 插入，i是从光标处开始插入，I是从光标所在行的第一个非空格开始插入 a和A 插入，a是从光标所在的下一个字符开始插入，A是光标所在行的最后一个字符开始插入 o和O o是在光标所在行的下一行插入一个新空行，O是在上一行插入一个空行 r和R r会替换光标所在的字符，R会一直替换光标所在的字符，直到按下esc键 esc 退出编辑模式 一般命令模式切换到命令模式的按键 :w 将编辑的数据写入到硬盘 :w! 如果文件的权限是只读，强制写入，能不能强制跟你对该文件的权限有关 :q 退出 :q! 强制退出，不保存 :wq 保存后退出，如果是:wq!就是强制保存退出 ZZ 和:wq的效果一样 :w [filename] 另存为 :r [filename] 把文件内容加载到光标所在行后面 :n1,n2 w [filename] 把n1到n2的内容另存为新文件 :! command 暂时退出vi到命令模式下执行command的显示结果例如【:! ls /home】就是在vi中查看/home下面以ls输出文件信息 :set nu(针对vim) 显示行号 :set nonu(针对vim) 取消行号 vim的缓存 vim防止某些原因导致的程序异常退出的情况会在编辑文件时创建一个.filename.swp的文件，这个文件里缓存了对filename的操作，如果打开文件之前出现了.swp文件就会报错，说什么found a swap file之类的，出现这个错误可能有两种情况：第一个就是多人维护同一个文件，第二个就是异常退出了。\n如果是多个人维护同一个文件就要协商是另一个人先退出来还是你在等等，如果是异常退出此时你有6个选择：\n输入o：以只读的方式打开文件，什么都不能做； 输入e：继续打开文件，但是还可能出现问题； 输入r：加载缓存内容，编辑完之后还是要手动删除缓存文件； 输入d：删除缓存文件； 输入q：不进行任何操作退出； 输入a：忽略操作，感觉和q一样的效果； vim的额外功能 vim的编辑界面会多出两个标识，一个是光标所在行和所在行的多少字符，另一个是界面占整体文件的百分比。\n可视区块：\nv 字符选择，将光标经过的地方反白选择 V 行选择，将光标经过的行反白选择 ctrl + v 可视区块，用矩形的方式选择数据 y 复制反白的地方 d 删除反白的地方 p 将刚刚复制的区块在光标处粘贴 多文件编辑：\n:n 编辑下一个文件 :N 编辑上一个文件 :files 列出这个vim开启的所有文件 多窗口功能：\n当一个文件非常大想要同时看到前面和后面的数据或者想对比两个文件时多窗口非常好用：\n:sp [filename] 如果没有filename就表示两个窗口打开的同一个文件 ctrl + w + jctrl + w + ↓ 按住ctrl + w后松开，在按j或者↓，光标可以移动到下个窗口 ctrl + w + kctrl + w + ↑ 用法同上，光标移动到上个窗口 ctrl + w + q 关闭下方的窗口，就是【ctrl + w + ↓】和:q的组合 环境设置和记录：\nvim会自动把我们的操作记录在~/.viminfo中，实现的效果就是我们在编辑文件之后在打开，光标会停留在上次编辑的位置，或者我们在执行其他操作比如查找反白之后，下次在打开，上次反白的地方还在。\n环境设置分为针对文件设置和默认设置，在一般命令模式下，执行**:set all可以看到这个文件的设置，也可以执行:set 参数**来设置，比如:set nu就是显示行号，也可以在/etc/vimrc中设置默认值，但是最好在~/.vimrc中设置，这个是针对用户的，默认不存，他可以针对用户自动覆盖/etc/vimrc文件中的设置，常用的设置项【注意，文件里使用双引号注释】：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 set nu\t\" 设置行号 set nonu\t\" 取消行号 set hlsearch\t\" 高亮查找，就是查找的结果反白 set nohlsearch\t\" 取消高亮查找 set autoindent\t\" 自动缩进 set noaudoindent\t\" 不自动缩进 set backup\t\" 自动备份，如果开启，在编辑文件时会多出来一个filename~的文件 set ruler\t\" 是否显示最后一行右侧的状态，就是行号、百分比什么的 set showmode\t\" 是否显示最后一行左侧的状态，就是--INSERT--之类的 set backspace=(0/1/2)\t\" 2表示可以用backspace键删除任意字符，0或者1表示只能删除刚刚输入的字符 syntax on\t\" 进行语法检查 syntax off\t\" 不进行语法检查 set bg=dark\t\" dark主题 set bg=light\t\" light主题 编码问题：\nwindows的dos和linux的一些字符定义不同，比如linux的换行符是LF($)，dos的换行符是CRLF(^M$)，可以用dos2unix和unix2dos命令转换。\n转换编码的话可以用iconv命令。\n","wordCount":"309","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://wangxiaohong123.github.io/posts/linux/4.vi/"},"publisher":{"@type":"Organization","name":"王小红的笔记","logo":{"@type":"ImageObject","url":"https://wangxiaohong123.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wangxiaohong123.github.io/ accesskey=h title="王小红的笔记 (Alt + H)">王小红的笔记</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wangxiaohong123.github.io/posts/ title=笔记><span>笔记</span></a></li><li><a href=https://wangxiaohong123.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://wangxiaohong123.github.io/categories/ title=分类><span>分类</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">linux-4.vi</h1><div class=post-meta>2 min</div></header><div class=post-content><p>比vi好用的编辑器有很多，比如nano，但是不是所有发行版都内置除vi意外的编辑器。最重要的是很多软件的编辑接口都会主动调用vi，比如crontab、visudo，所以vi是最重要的。vim是vi的升级版，他会根据文件的扩展名和文件内的开头信息显示对应的语法样式，其实感觉就是多个颜色、下划线等样式，缩进啥的还是很痛苦。</p><p>大部分的发行版都用vim替换vi了，如果输入<strong>alias</strong>时出现**alias vi=&lsquo;vim&rsquo;**表示执行vi就是在执行vim，否则还是要手动执行vim。</p><p>vi分为3中模式：</p><ul><li>一般命令模式：vi 文件名 就进入一般命令模式了，简称一般模式，在这个模式里可以使用上下左右移动光标，删除字符或者删除整行，也可以使用复制粘贴；</li><li>编辑模式：一般模式不能编辑，直到按下【i、l、o、O、a、A、r、R】任意一个字母才会进入编辑模式，一般编辑模式屏幕左下方会出现insert、replace等字样，按【esc】退出编辑模式；</li><li>命令模式：在一般模式下输入【:、/、?】任意一个进入命令模式，在这个模式里可以查找数据、保存、批量替换、退出vi、显示行号等操作；</li></ul><h5 id=一般命令模式的按键>一般命令模式的按键：<a hidden class=anchor aria-hidden=true href=#一般命令模式的按键>#</a></h5><table><thead><tr><th>移动光标方法</th><th>可以使用数字加命令，比如30↓就是向下移动30个字符</th></tr></thead><tbody><tr><td>h或者←</td><td>光标向左移动一个字符</td></tr><tr><td>j或者↓</td><td>光标向下移动一个字符</td></tr><tr><td>k或者↑</td><td>光标向上移动一个字符</td></tr><tr><td>l或者→</td><td>光标向右移动一个字符</td></tr><tr><td>ctrl+f</td><td>屏幕向下翻页</td></tr><tr><td>ctrl+b</td><td>屏幕向上翻页</td></tr><tr><td>ctrl+d</td><td>屏幕向下翻半页</td></tr><tr><td>ctrl+u</td><td>屏幕向上翻半页</td></tr><tr><td>+</td><td>光标移动到非空格的下一行</td></tr><tr><td>-</td><td>光标移动到非空格的上一行</td></tr><tr><td>N + 空格</td><td>n是数字，光标向右移动n个字符</td></tr><tr><td>0或者home键</td><td>移动到这一行的第一个字符位置，这个是数字0</td></tr><tr><td>$或者end键</td><td>移动到这一行的最后一个字符位置</td></tr><tr><td>H</td><td>移动到屏幕最上方第一行第一个字符</td></tr><tr><td>M</td><td>移动到屏幕中央那行的第一个字符</td></tr><tr><td>L</td><td>移动到屏幕最下方最后一行的第一个字符</td></tr><tr><td>G</td><td>移动到文件的最后一行</td></tr><tr><td>nG</td><td>n是数字，移动到文件的第n行</td></tr><tr><td>gg</td><td>移动到文件的第一行，相当于1G</td></tr><tr><td>n + 回车</td><td>n是数字，光标向下移动n行</td></tr><tr><td><strong>查找和替换</strong></td><td></td></tr><tr><td>/word</td><td>向光标之下查找第一个名为word的字符串</td></tr><tr><td>?word</td><td>向光标之上查找第一个名为word的字符串</td></tr><tr><td>n</td><td>n是按键，代表重复前一个查找的操作，比如/word之后在按n就是继续查找</td></tr><tr><td>N</td><td>N是按键，和n相反，反向前一个查找的操作，/word会变成?word</td></tr><tr><td>:n1,n2/word1/word2/g</td><td>n1和n2是数字，在第n1和n2行之间查找word1，并把word1替换成word2</td></tr><tr><td>:1,$s/word1/word2/g</td><td>从第1行到最后一行之间查找word1，并把word1替换成word2</td></tr><tr><td>:1,$s/word1/word2/gc</td><td>从第1行到最后一行之间查找word1，并把word1替换成word2，且在替换前给用户显示确认提示字符</td></tr><tr><td><strong>删除，复制和粘贴</strong></td><td></td></tr><tr><td>x、X</td><td>x表示向后删除一个字符，X表示向前删除一个字符</td></tr><tr><td>nx</td><td>n是数字，向后删除n个字符</td></tr><tr><td>dd</td><td>删除光标所在一整行</td></tr><tr><td>ndd</td><td>n是数字，向下删除光标所在的下n行</td></tr><tr><td>d1G</td><td>删除光标到第一行的所有数据</td></tr><tr><td>dG</td><td>删除光标到最后一行的所有数据</td></tr><tr><td>d$</td><td>删除光标所在位置到这行最后一个字符</td></tr><tr><td>d0</td><td>删除光标所在位置到这行第一个字符</td></tr><tr><td>yy</td><td>复制光标所在行</td></tr><tr><td>nyy</td><td>n是数字，复制光标所在行的下n行</td></tr><tr><td>y1G</td><td>复制光标所在行到第一行的所有数据</td></tr><tr><td>yG</td><td>复制光标所在行到最后一行的所有数据</td></tr><tr><td>y0</td><td>复制光标所在字符到行首的所有数据</td></tr><tr><td>y$</td><td>复制光标所在字符到行尾的所有数据</td></tr><tr><td>p、P</td><td>p是把复制的数据在光标下一行粘贴，P是在上一行粘贴</td></tr><tr><td>J</td><td>把光标所在行和下一行合成同一行</td></tr><tr><td>c</td><td>删除重复多个数据</td></tr><tr><td>u</td><td>恢复前一个操作</td></tr><tr><td>ctrl + r</td><td>重做上一个操作</td></tr></tbody></table><h5 id=一般命令模式切换到编辑模式的按键>一般命令模式切换到编辑模式的按键：<a hidden class=anchor aria-hidden=true href=#一般命令模式切换到编辑模式的按键>#</a></h5><table><thead><tr><th>i和I</th><th>插入，i是从光标处开始插入，I是从光标所在行的第一个非空格开始插入</th></tr></thead><tbody><tr><td>a和A</td><td>插入，a是从光标所在的下一个字符开始插入，A是光标所在行的最后一个字符开始插入</td></tr><tr><td>o和O</td><td>o是在光标所在行的下一行插入一个新空行，O是在上一行插入一个空行</td></tr><tr><td>r和R</td><td>r会替换光标所在的字符，R会一直替换光标所在的字符，直到按下esc键</td></tr><tr><td>esc</td><td>退出编辑模式</td></tr></tbody></table><h5 id=一般命令模式切换到命令模式的按键>一般命令模式切换到命令模式的按键<a hidden class=anchor aria-hidden=true href=#一般命令模式切换到命令模式的按键>#</a></h5><table><thead><tr><th>:w</th><th>将编辑的数据写入到硬盘</th></tr></thead><tbody><tr><td>:w!</td><td>如果文件的权限是只读，强制写入，能不能强制跟你对该文件的权限有关</td></tr><tr><td>:q</td><td>退出</td></tr><tr><td>:q!</td><td>强制退出，不保存</td></tr><tr><td>:wq</td><td>保存后退出，如果是:wq!就是强制保存退出</td></tr><tr><td>ZZ</td><td>和:wq的效果一样</td></tr><tr><td>:w [filename]</td><td>另存为</td></tr><tr><td>:r [filename]</td><td>把文件内容加载到光标所在行后面</td></tr><tr><td>:n1,n2 w [filename]</td><td>把n1到n2的内容另存为新文件</td></tr><tr><td>:! command</td><td>暂时退出vi到命令模式下执行command的显示结果例如【:! ls /home】就是在vi中查看/home下面以ls输出文件信息</td></tr><tr><td>:set nu(针对vim)</td><td>显示行号</td></tr><tr><td>:set nonu(针对vim)</td><td>取消行号</td></tr></tbody></table><h5 id=vim的缓存>vim的缓存<a hidden class=anchor aria-hidden=true href=#vim的缓存>#</a></h5><p>vim防止某些原因导致的程序异常退出的情况会在编辑文件时创建一个.filename.swp的文件，这个文件里缓存了对filename的操作，如果打开文件之前出现了.swp文件就会报错，说什么found a swap file之类的，出现这个错误可能有两种情况：第一个就是多人维护同一个文件，第二个就是异常退出了。</p><p>如果是多个人维护同一个文件就要协商是另一个人先退出来还是你在等等，如果是异常退出此时你有6个选择：</p><ul><li>输入o：以只读的方式打开文件，什么都不能做；</li><li>输入e：继续打开文件，但是还可能出现问题；</li><li>输入r：加载缓存内容，编辑完之后还是要手动删除缓存文件；</li><li>输入d：删除缓存文件；</li><li>输入q：不进行任何操作退出；</li><li>输入a：忽略操作，感觉和q一样的效果；</li></ul><h5 id=vim的额外功能>vim的额外功能<a hidden class=anchor aria-hidden=true href=#vim的额外功能>#</a></h5><p>vim的编辑界面会多出两个标识，一个是光标所在行和所在行的多少字符，另一个是界面占整体文件的百分比。</p><p>可视区块：</p><table><thead><tr><th>v</th><th>字符选择，将光标经过的地方反白选择</th></tr></thead><tbody><tr><td>V</td><td>行选择，将光标经过的行反白选择</td></tr><tr><td>ctrl + v</td><td>可视区块，用矩形的方式选择数据</td></tr><tr><td>y</td><td>复制反白的地方</td></tr><tr><td>d</td><td>删除反白的地方</td></tr><tr><td>p</td><td>将刚刚复制的区块在光标处粘贴</td></tr></tbody></table><p>多文件编辑：</p><table><thead><tr><th>:n</th><th>编辑下一个文件</th></tr></thead><tbody><tr><td>:N</td><td>编辑上一个文件</td></tr><tr><td>:files</td><td>列出这个vim开启的所有文件</td></tr></tbody></table><p>多窗口功能：</p><p>当一个文件非常大想要同时看到前面和后面的数据或者想对比两个文件时多窗口非常好用：</p><table><thead><tr><th>:sp [filename]</th><th>如果没有filename就表示两个窗口打开的同一个文件</th></tr></thead><tbody><tr><td>ctrl + w + jctrl + w + ↓</td><td>按住ctrl + w后松开，在按j或者↓，光标可以移动到下个窗口</td></tr><tr><td>ctrl + w + kctrl + w + ↑</td><td>用法同上，光标移动到上个窗口</td></tr><tr><td>ctrl + w + q</td><td>关闭下方的窗口，就是【ctrl + w + ↓】和:q的组合</td></tr></tbody></table><p>环境设置和记录：</p><p>vim会自动把我们的操作记录在~/.viminfo中，实现的效果就是我们在编辑文件之后在打开，光标会停留在上次编辑的位置，或者我们在执行其他操作比如查找反白之后，下次在打开，上次反白的地方还在。</p><p>环境设置分为针对文件设置和默认设置，在一般命令模式下，执行**:set all<strong>可以看到这个文件的设置，也可以执行</strong>:set 参数**来设置，比如:set nu就是显示行号，也可以在/etc/vimrc中设置默认值，但是最好在~/.vimrc中设置，这个是针对用户的，默认不存，他可以针对用户自动覆盖/etc/vimrc文件中的设置，常用的设置项【注意，文件里使用双引号注释】：</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>set</span> nu					<span style=color:#f1fa8c>&#34; 设置行号
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>set nonu				&#34;</span> 取消行号
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>set</span> hlsearch			<span style=color:#f1fa8c>&#34; 高亮查找，就是查找的结果反白
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>set nohlsearch			&#34;</span> 取消高亮查找
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>set</span> autoindent			<span style=color:#f1fa8c>&#34; 自动缩进
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>set noaudoindent		&#34;</span> 不自动缩进
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>set</span> backup				<span style=color:#f1fa8c>&#34; 自动备份，如果开启，在编辑文件时会多出来一个filename~的文件
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>set ruler				&#34;</span> 是否显示最后一行右侧的状态，就是行号、百分比什么的
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>set</span> showmode			<span style=color:#f1fa8c>&#34; 是否显示最后一行左侧的状态，就是--INSERT--之类的
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>set backspace=(0/1/2)	&#34;</span> 2表示可以用backspace键删除任意字符，0或者1表示只能删除刚刚输入的字符
</span></span><span style=display:flex><span>syntax on				<span style=color:#f1fa8c>&#34; 进行语法检查
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>syntax off				&#34;</span> 不进行语法检查
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>set</span> <span style=color:#8be9fd;font-style:italic>bg</span><span style=color:#ff79c6>=</span>dark				<span style=color:#f1fa8c>&#34; dark主题
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>set bg=light			&#34;</span> light主题
</span></span></code></pre></td></tr></table></div></div><p>编码问题：</p><p>windows的dos和linux的一些字符定义不同，比如linux的换行符是LF($)，dos的换行符是CRLF(^M$)，可以用dos2unix和unix2dos命令转换。</p><p>转换编码的话可以用iconv命令。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wangxiaohong123.github.io/tags/linux/>Linux</a></li></ul><nav class=paginav><a class=prev href=https://wangxiaohong123.github.io/posts/linux/3.%E7%A3%81%E7%9B%98%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/><span class=title>« Prev</span><br><span>linux-3.磁盘和文件系统</span>
</a><a class=next href=https://wangxiaohong123.github.io/posts/linux/5.bash/><span class=title>Next »</span><br><span>linux-5.bash</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share linux-4.vi on x" href="https://x.com/intent/tweet/?text=linux-4.vi&amp;url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f&amp;hashtags=linux"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share linux-4.vi on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f&amp;title=linux-4.vi&amp;summary=linux-4.vi&amp;source=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share linux-4.vi on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f&title=linux-4.vi"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share linux-4.vi on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share linux-4.vi on whatsapp" href="https://api.whatsapp.com/send?text=linux-4.vi%20-%20https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share linux-4.vi on telegram" href="https://telegram.me/share/url?text=linux-4.vi&amp;url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share linux-4.vi on ycombinator" href="https://news.ycombinator.com/submitlink?t=linux-4.vi&u=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2flinux%2f4.vi%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://wangxiaohong123.github.io/>王小红的笔记</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>