<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>其他 | 王小红的笔记</title><meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://wangxiaohong123.github.io/categories/%E5%85%B6%E4%BB%96/><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://wangxiaohong123.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wangxiaohong123.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wangxiaohong123.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wangxiaohong123.github.io/apple-touch-icon.png><link rel=mask-icon href=https://wangxiaohong123.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wangxiaohong123.github.io/categories/%E5%85%B6%E4%BB%96/index.xml><link rel=alternate hreflang=en href=https://wangxiaohong123.github.io/categories/%E5%85%B6%E4%BB%96/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wangxiaohong123.github.io/categories/%E5%85%B6%E4%BB%96/"><meta property="og:site_name" content="王小红的笔记"><meta property="og:title" content="其他"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="其他"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wangxiaohong123.github.io/ accesskey=h title="王小红的笔记 (Alt + H)">王小红的笔记</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wangxiaohong123.github.io/posts/ title=笔记><span>笔记</span></a></li><li><a href=https://wangxiaohong123.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://wangxiaohong123.github.io/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>其他</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>stable-diffusion</h2></header><div class=entry-content><p>stable-diffusion原理就是逆向降噪的过程，就好比秋天的时候地上都是树叶，这个时候地上的树叶就是噪点，把树叶一点一点收起来，地面越来越清晰就是降噪的过程，所以使用stable-diffusion生成图片的时候控制台中的图片时从模糊到越来越清晰的。
那么就有两个问题，初始的图片为什么要加噪点，以及如何实现降噪？
为什么要加噪点？ 加噪点是为了给图片降维，图片是由像素组成，像素是由红黄蓝三颜色混合组成，拿一个512*512的图片举例，这个图片就可以转换成$5125123=786432$个数字组成，如果是读取的话没有任何困难，但是如果把786432个数字放到神经网络里就会变成786432维，这种算力不是普通显卡可以承受的，所以把图片上不是关键的像素变成噪点可以减少计算维度，就像地上虽然堆满了树叶，但是我们还能看出来这是一片空地，。其实不需要关心怎么给图片加上噪点，模型库中的图片自带噪点，只需要计算怎么降燥。
怎么去除噪点？ 网上一搜这里会出现一大堆名次，VAE、UNet、CLIP巴拉巴拉看不懂，但是可以想象出来地上的树叶并不是一次全都落下来的，每次只落一点慢慢地上的树叶越来越多，清理这些树叶可能需要n次，n越大就越干净，这里就对应了stable-diffusion的采样步数，可以理解成清除噪点的次数。如何降噪对应的是采样器，比如有的采样器是用吸尘器吸树叶，有的采样器用手捡树叶。
stable-diffusion怎么识别prompt去画图？ 首先需要一个足够大的图片数据库，里面存放的是降维过的(也就是说有噪点的)图片，就是模型库，其次它需要有**语意识别(trnasformer，也是chat GPT里的T)**功能，识别语意之后去模型库中找到描述相关的图片中和prompt相符合的内容，最后把他们整合。
安装模型 我没有使用cola安装，很多扩展都没有，比如civitai，但是我手动装了civitai页面上页不显示，这样的话下载模型只能去c站[https://civitai.com/]手动下载，把下载完的模型放到stable-diffusion目录下的models/Stable-diffusion路径下，然后重启stable-diffusion。
1.lora模型 安装完lora模型之后点击附加网络是看不到我们刚刚下载的模型的：
但是他已经提示了需要把模型放到models/lora路径下，把刚刚下载的模型复制一份到这个路径，然后点击页面右边的刷新按钮就可以看到刚才安装的模型了。
然后我们去c站找一张lora的模型示例图，把prompt复制到文生图的提示词里：
然后点击刚刚下载的模型，在上面的输入框会出现一个lora标签，shuimobysimV3就是我们刚刚下载的模型在本地的名称，最后的1表示权重，这里能看到复制过来的提示词中的lora中的模型名和我们安装的不一样， 所以需要替换模型名最后删掉刚才生成的lora标签，点击生成：
严格来说lora不像是一个模型，下载的时候就可以看出来他的体积非常小，他的原理类似一个汉堡，一个人说不够甜，厨师就把上面的面包拿掉，挤了点糖，第二次说生菜少了，厨师就把上面的面包和牛肉拿掉，下面放了几片生菜，就这样一点一点加工。他的原理就是不影响原有扩散模型的层中的内容，而是在中间插入新层影响输出内容。
controlNet 安装 从网址安装扩展中输入controlnet[https://github.com/Mikubill/sd-webui-controlnet]的地址安装。本地自己安装的stable-diffusion在装完controlNet之后是没有模型的，需要自己去hugginface[https://huggingface.co/lllyasviel/ControlNet-v1-1/tree/main]或者[https://huggingface.co/TencentARC/T2I-Adapter/tree/main/models]上下载pth后缀的模型，下载完后放到stable-diffusion-webui/extensions/sd-webui-controlnet/models路径下，最后重启webUI。
新版生成预览按钮在这里，妈的找半天：
常用预处理器和模型 canny：线稿检测，就是上图的效果，把图片的信息提取出线条，这样可以让SD根据提供的线条作画； color：他会把图片变成马赛克，马赛克的颜色和图片对应，这样可以控制SD画图时的颜色； mlsd+seg开头的预处理器：mlsd是直线检测，他会把图片中的直线选中，曲线被忽略，seg开头的是分块检测，会把图片中的每个物体用不同颜色区分，他俩一起使用可以实现室内设计相关功能； 如果想要同时使用controlNet的多个模型时可以使用上面的control net unit选显卡，每个选项卡对应一个模型，每个选项卡都需要勾选enable：
简单使用 1.提示词 大部分情况的提示次其实就一个字，抄，去c站找到目标图片查看他的提示次和模型……
正向提示次：
普通关键词使用’,‘分割，不同顺序会导致不一样的出图结果； 小括号表示赋权，比如(blue hair:1.5)表示蓝色头发权重1.5； 中括号表示关键词参与采样步数占比，比如采样步数为20时，[blue hair:0.5]和[blue hair::10]都表示关键词参与前10步的采样； 2.局部重绘 图生图的一个选项卡，使用这个可以把图片中我们不想要的内容替换掉。
3.换脸 换脸和换其他部位的思路一样，使用局部重绘功能把想要更换的位置涂掉，然后利用canny模型锁定图片整体的线条，然后用open pose模型锁定任务的骨架，open pose的作用是换脸时因为脸部被我们涂掉了，所以DF在自由发挥的时候很有可能在脸上画一只手之类的，open pose可以限制DF不要话其他的四肢，在确定参数、模型都没问题后可能换出来的脸很丑，这个时候需要提示次做最后的补充，然后开始刷图，跟抽奖一样。
inpaint anything扩展也可以实现这个功能。
4.图片放大 不考虑插件的情况SD有3个地方可以实现图片的放大：
字生图时选择高清修复； 图生图时在脚本处选择SD upscale，或者安装Ultimate SD upscale[https://github.com/Coyote-A/ultimate-upscale-for-automatic1111]扩展; 额外功能中对图片进行缩放； 不管使用哪种方式都要选择放大算法，常见的放大的算法：Lanczos、Nearest、LDSR、ESRGAN_4x、R-ESRGAN 4x+、R-ESRGAN 4x+ Anime6B、SwinIR_4x、ScuNET、ScuNET PSNR。
Lanczos、Nearest不好用，LDSR动漫和真人都可以，ESRGAN_4x和SwinIR_4x更适合真人；R-ESRGAN 4x+、R-ESRGAN 4x+ Anime6B更适合动漫；SwinIR_4x、ScuNET、ScuNET PSNR更适合降噪；
...</p></div><footer class=entry-footer>1 min</footer><a class=entry-link aria-label="post link to stable-diffusion" href=https://wangxiaohong123.github.io/posts/%E5%85%B6%E4%BB%96/stable-diffusion/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>数据分析-大纲</h2></header><div class=entry-content><p>指标 核心指标：
初创公司的指标更关注新增用户量，中期更关注活跃用户，后期更关注营收
数字的意义没有比率大，比如说注册成功数，1000个人里100个人注册成功要比10000个人里200个人注册成功要好，比率形式的指标可以更好对比，单一的看一个数字指标很容易变成虚荣的。
产品运营指标：AARRR框架 用户获取 广告曝光量 下载量：下载量有个尴尬的地方是app store点击下载跳转到商店，并不一定是真的下载，这样会造成一部分数据失真； 日新增用户：日新增用户应该以注册完成为准； 获客成本 一次回话用户数占比：一次会话用户数占比是指下载完成功只打开1次app并且使用时间在2分钟内； 渠道转化率：曝光次数CPM，点击次数CPC，卖出一次CPS，下载次数CPD，曝光时间CPT； 邀请转化率：用户邀请新人并完成注册； ROI 用户活跃 日/周/月活，广义上浏览官网、公众号下单都算使用，不局限于打开app； 活跃用户占比：活跃用户数在总用户数的比例，可以判断一个app的健康程度； 新老用户占比 用户session次数：打开产品->使用->退出算一次session，打开后3分钟内没有使用也算退出，为什么是3分钟？社交app中如果打开app3分钟什么也没做基本上就是走开了; 用户访问时长：一次session的时长； 平均访问次数：一段时间内用户的平均session数； 其他的推送唤回指标 用户留存 一般就是次日留存，七日留存，还有七日内留存之类的
营收 付费用户数 付费用户数占比：每日付费用户占活跃用户数比，或者总付费用户占总用户数比； ARPU：一段时间内每个用户的平均收入，他是有时间维度的客单价概念，其实就是销售总额/用户数； ARPPU： LTV：生命周期价值 = ARPU / 流失率，比如1个月内留存为60%，那么流失率就是40%，那1月份的用户平均每个人能创造的价值(LTV) = 1月份的ARPU * 100 / 40; 传播 k因子：每个用户能够带来几个新用户，k因子 = 用户数 * 平均邀请人数 * 邀请转化率； 用户分享率：分享功能占浏览页面人数； 活动/邀请页曝光量 有的app一些设计很不友好，比如王者一上来就全是小红点，都是为了完成kpi，全是小红点就有用户忍不住去点，可以增加用户使用时长，不应该学。
具体需要哪些指标需要根据业务梳理，梳理出流程图后根据流程图梳理指标，比充值的流程，充值又分成内购和订阅，再加上新老用户维度画出流程图可能就有了哪个页面出发的付费、付费转化率、回购率等指标。
Excel 文本清洗函数 Find： Substitute： Left Right Mid： Text： Concatenate： Trim： Replace： Len： 关联匹配函数 Lookup： Row： Vlookup： Column： Index： Offset： Match： Hyperlink： 逻辑运算函数 And Or If Is Not 计算统计函数 Sum Sumproduct Count Max Min Rank Rand Randbetween Average Quartile Stdev Substotal Int Round 时间序列函数 Year Month Weekday Weeknum Day Date Now Today Excel技巧 ctrl+方向键：光标快速移动； ctrl+shift+方向键：快速框选； ctrl+空格：选定整列； shift+空格：选定整行； ctrl+a：选定整张表； alt+enter：换行； 使用拆分列功能把范围的数据(比如7k-10k)拆成两列方便统计； 使用条件格式让结果更直观； 使用数据透视表对数据进行统计和切片(按条件拆成不同sheet页); 视图中选择冻结首行将表头固定，方便查看数据； 数据可视化</p></div><footer class=entry-footer>1 min</footer><a class=entry-link aria-label="post link to 数据分析-大纲" href=https://wangxiaohong123.github.io/posts/%E5%85%B6%E4%BB%96/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>爬虫-1.入门</h2></header><div class=entry-content><p>任何语言都可以进行爬虫，但是python最方便，所以一般人都用python进行爬虫。
爬虫的时候只要不破坏网站、不侵犯用户隐私时不犯法的。
robots协议(君子协议):一般网站的主url后拼接robots.txt输出的内容为不允许爬的，爬的时候需要遵守。
一 爬虫用到的模块 有的时候我们拿到的资源是部分url，需要自己拼域名，不过部分url前面会出现有斜线’/‘和没斜线的情况，有斜线的拼主域名就可以，没有斜线的是相对路径，需要把当前路的访问url取然后在拼接，非常麻烦，使用urllib就很简单：
1 2 3 from urllib.parse import urljoin herf = urljoin("当前访问url", "要拼接的url") a.time模块 time模块常用的两个功能：
1 2 3 4 5 6 7 8 9 import time # 获取当前的秒级时间戳 t = time.time() # 毫秒时间戳 t = int(time.time() * 1000) # 让线程休眠5s time.sleep(5) b.os模块 1 2 3 4 5 6 7 import os # 创建目录 os.makedirs("/url/subUrl") # 该url是否是已存在路径 os.path.isDir("url") c.json模块 1 2 3 4 5 6 7 import json # 将json字符串转换成字典 d = json.loads(s) # 把字典转成json字符串 s = json.dumps(dic) d.random模块 1 2 3 4 5 6 7 import random # 生成10到20的随机数 i = random.randint(10, 20) # 生成1到3的随机小数 f = random.uniform(1, 3) e .requests模块(需要安装) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 import requests # 请求头伪装，有的网站会根据请求头判断是否是爬虫，我们就是要尽可能装成浏览器 header = { "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36" } # get请求 url = "https://www.sogou.com/web" param = { "query": "周杰伦" } resp = requests.get(url, headers=header, params=param) # post请求 url = "https://fanyi.baidu.com/sug" data = { "kw":"hello" } resp = requests.post(url, data=data) # 文本格式获取响应 print(resp.text) # json格式获取响应 print(resp.json()) # 获取字节内容，可以用这种方式获取媒体然后输出到图片 f.多线程和协程 进程是资源单位，线程是执行单位，爬虫中多线程用处不大，很多网站会限流而且线程过多容易把网站搞挂。
...</p></div><footer class=entry-footer>4 min</footer><a class=entry-link aria-label="post link to 爬虫-1.入门" href=https://wangxiaohong123.github.io/posts/%E5%85%B6%E4%BB%96/%E7%88%AC%E8%99%AB/%E5%85%A5%E9%97%A8/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://wangxiaohong123.github.io/>王小红的笔记</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>