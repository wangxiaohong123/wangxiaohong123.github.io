---
title: MySQL参数配置
tags:
  - MySQL
categories: 数据库
copyright: true
---


```mysql
# 冷数据经过多少ms后被访问变成热数据
innodb_old_blocks_time
# 冷热数据比例
innodb_old_blocks_pct
# 最大连接数
max_connections

# 设置buffer pool大小为8g
# buffer pool的大小=chunk大小 * buffer的数量* x，x是2的倍数否则会有内存浪费
# 1g以内只有一个buffer pool
innodb_buffer_pool_size=8589934592
# 设置4个buffer pool
# 因为在操作buffer pool中的数据时，需要加锁，多设置buffer pool可以提高并发
innodb_buffer_pool_instances=4

# 一个区的连续数据页被访问超过56个就会把下个区的数据预读到buffer pool中
innodb_read_ahead_threshold=56
# 设置chunk大小是128m
innodb_buffer_pool_chunk_size=134217728

# 设置redo log buffer大小，默认就是16m，够用了
innodb_log_buffer_size=16777216
# redo log日志路径
innodb_log_group_home_dir
# redo log文件大小，默认48m
innodb_log_file_size=134217728
# redo log文件数量
innodb_log_files_in_group=2
# redo log刷盘方式
# 0 提交事物的时候不刷盘
# 1 刷到磁盘
# 2 刷到OS cache
innodb_flush_log_at_trx_commit=1

# 设置刷盘时每秒最大的速率，应该设置成硬盘的随机写速率
innodb_io_capacity=300
# 设置刷盘时不把临近的缓存页一起刷盘
innodb_flush_neighbors=0
```

### 命令

```mysql
# 查看InnoDB参数及使用情况
SHOW ENGINE INNODB STATUS
# 查看存放数据的目录
show variables like 'datadir'
# 修改隔离级别
# level可以是REPEATABLE READ，READ COMMITTED，READ UNCOMMITTED，SERIALIZABLE
SET [GLOBAL|SESSION] TRANSACTION ISOLATION LEVEL level
```

