---
title: jvm-java历史
tags:
  - JVM
categories: 基础
copyright: true
---

从业务领域划分java，可以分成4部分：

*   java card：支持在小内存设备上运行的小程序；
*   java ME：支持在手机、PDA等终端上运行的移动程序，之前叫J2ME，提供部分java API；
*   java SE：在桌面运行的程序，之前叫J2SE，提供完整的java API；
*   java EE：支持多层架构的企业应用(比如ERP)，之前叫J2EE，他是在java SE的基础上做了大量的补充和一些部署支持；

java SE的核心api都是以java.\*开头，java EE的扩展之前以javax.\*开头，后来一些扩展也进入了核心包，所以核心包也有部分api是以javax开头的。

##### JDK发展史

1991年4月James Gosling启动了绿色计划，这个计划最开始是要开发一个在电子产品(机顶盒、冰箱等)上通用的架构，产品叫Oak，就是Java的前身，但是在市场上并没有普及，1995年Oak改名叫Java，在SunWorld大会上发布Java1.0，并且提出Write One，Run Anywhere的口号，1996年1月的时候JDK1.0发布，这个时候Java才有了第一个正式版本的运行环境，这个时候JDK里面只有一个纯解释执行的虚拟机(Sun Classic VM)。

到1996年4月就有8万多网站使用java实现，在同年5月底Sun在旧金山举行第一次JavaOne大会，从此javaOne成为全世界数百万的Java工程师每年一度的技术盛会。

97年2月JDK1.1发布，增加JDBC、RMI、JavaBeans，还有一些语法比如内部类、反射等。

98年12月JDK1.2发布，这是个里程碑的版本，在这个版本中Java体系分成3个方向，J2ME、J2SE和J2EE。也是在这个版本中第一次内置了JIT编译器，这个版本里并存了3个虚拟机，classic VM、HotSpot VM和Exact VM，后两个虚拟机内置JIT，classic VM需要外挂。Collections集合类也是在这个版本发布的。

HotSpot是一家Longview Technologies的小公司开发，97年被Sun收购，HotSpot是从1.3之后版本的默认虚拟机。

2000年JDK1.3发布，这个版本更新的较少，都是一些类库比如Timer API，更多的的是改进Java 2D，但是从1.3开始Sun保持每2年更新一个JDK主版本，以动物命名，小的修复版本用昆虫命名。

2002年JDK1.4版本发布，这个是java真正走向成熟的版本，新增了很多特性，比如正则、异常链、NIO、日之类、XML解析器等。很多公司都有参与或者自己实现的独立的JDK1.4版本，比如IBM。现在也有很多的应用框架比如Spring、status可以运行在1.4上。2002年.Net发布了。

2004年JDK1.5版本发布，这个版本在语法的易用性上有了很大的改进，比如泛型、动态注解、可变长参数等。这个版本还改进了内存模型，提供了并发包。

2006年JDK1.6版本发布，这个版本取消了J2EE这种命名，改成Java EE6。这个版本对虚拟机做了大量改进，比如锁与同步、垃圾回收、类加载等方面的算法。也是在06年11月的JavaOne大会上，Sun宣布将java开源，并建立Open JDK组织对源码进行独立管理。

JDK1.6发布后没有保持2年一个大版本的速度，直到09年才发布了JDK1.7，而且也不是完整的1.7，在1.7中一个规划了10个里程碑，计划在2010年9月结束，2009年2月只是第一个里程碑，但是Sun那两年过的贼差，导致1.7一直跳票，09年4月Oracle收购Sun，在Oracle收购Sun之后，大量裁剪1.7的预定目标，比如lambda、Jigsaw(虚拟机模块化支持)和Coin(语言细节进化)放到了1.8中，最后1.7就加了个G1(发布后一直是Experimental状态，直到2012年4月才转正)，又升级了下类加载架构。

现在只是Java的商标贵Oracle，java语言不属于任何公司，由JCP组织管理，但是JCP主要就是Sun公司领导的。也是从1.7开始JDK的发布一直在跳票。

##### 虚拟机发展史

Classic VM是历史上第一个商用的java虚拟机，这个时候只能用纯解释器执行代码，如果要用JIT，需要外挂，但是编译器和解释器不能相互配合，意思是尽管使用了JIT，JIT需要对每行代码都进行编译，不管执行的频率是否有编译的价值，在加上需要考虑程序的响应时间，这写编译器不敢使用耗时过高的优化技术，所以这个时候使用了JIT但是效率也比C/C++慢很多，所以那时候都说Java慢。

在JDK1.2的时候发部过Exact VM，他提供了更准确的内存管理，比如内存地址是指针还是真正的变量，这样有利于GC，哪怕对象被移动也不应判断。但是他马上就被HotSpot取代了，在1.3的时候HotSpot变成了JDK的默认虚拟机，1.4的时候classic VM变成历史。

HotSpot VM通过执行计数器找出最具有编译价值的代码，通过JIT以方法为单位进行编译，如果一个方法被频繁调用或者方法中有效循环次数很多，就会触发标准编译和OSR(栈上替换)操作，通过编译器和解释器配合工作。

Oracle收购Sun和BEA公司之后打算把两家的虚拟机合并，既有JRockit的垃圾回收器又有HotSpot的JIT和混合时的运行系统。

Sun公司的其他虚拟机：

*   KVM：强调轻量、简单、高度可移植，之前在手机平台上使用。
*   CDC/CLDC HotSpot Implementation：他是运行Java ME的。
*   Squawk VM：之前用在Java Card上。
*   JavaInJava：这是个实验的虚拟机。
*   MaxIne VM：不了解。

和HotSpot类似的虚拟机还有BEA的JRockit VM和IBM的J9 VM。

Apache的Harmony不能叫java虚拟机，因为他没通过TCK认证(如果一个公司要求自己的运行平台兼容java语言就必须通过TCK认证)，但是Sun不给Apache认证，后来Apache一生气就退出JCP了，在加上Open JDK的诞生，导致IBM也抛弃Apache加入OpenJDK的开发，虽然Harmony没有被商业使用，但是他的很多代码被引到了INM的JDK7和Google的Android SDK中，Android燃Java真正走进了移动设备领域，只是不是Sun计划的Java ME那条路。Android用的是Dalvik VM，他不是一个Java虚拟机，没有遵守java虚拟机规范，所以他不能执行class文件，而且是基于寄存器而不是栈架构，但是class文件可以转成dex文件被Dalvik执行，也兼容大部分的Java API，后来Android自己也出了个即时编译器。

微软开发.Net是因为Sun最开始不让微软用java，微软最开始自己开发了一个Microsoft JVM，Sun害怕他把java的控制权抢过去，这样java就只能在Windows上使用，然后就把微软告了，微软没办法，自己开发了个.Net。