---
title: 25.验证回文串
tags:
  - 算法
categories: leecode
copyright: true
---

### 题目

如果在将所有大写字符转换为小写字符、并移除所有非字母数字字符之后，短语正着读和反着读都一样。则可以认为该短语是一个 回文串 。

字母和数字都属于字母数字字符。给你一个字符串 s，如果它是 回文串 ，返回 true ；否则，返回 false 。

**示例 1：**

```
输入: s = "A man, a plan, a canal: Panama"
输出：true
解释："amanaplanacanalpanama" 是回文串。
```

**提示：**

-   1 <= s.length <= 2 * 10^5^
-   `s` 仅由可打印的 ASCII 字符组成

### 题解

空字符串也是有效的。而且这道题要处理大小写。

a\~z的ASCII码是97\~122

A\~Z的ASCII码是65\~90

0\~9的ASCII码是48\~57

##### 1.双指针

最开始想到的就是双指针，一个从头遍历，一个从尾开始遍历，在两个指针相遇之前，碰见空格和数据跳过，当两个指针不相等就返回false。直到指针相遇还没退出就返回true。

```java
public class IsPalindromeTwoPoints {

    public boolean isPalindrome(String s) {
        int l = 0, r = s.length() - 1;
        while (l < r) {
            char cl = s.charAt(l);
            while (l < r && !isValidChar(cl)) {
                l++;
                cl = s.charAt(l);
            }

            char cr = s.charAt(r);
            while (l < r && !isValidChar(cr)) {
                r--;
                cr = s.charAt(r);
            }

            if (65 <= cl && cl <= 90) {
                cl += 32;
            }
            if (65 <= cr && cr <= 90) {
                cr += 32;
            }

            if (cl != cr) {
                return false;
            } else {
                l++;
                r--;
            }
        }

        return true;
    }

    private boolean isValidChar(char c) {
        if (48 <= c && c <= 57) {
            return true;
        }
        if (97 <= c && c <= 122) {
            return true;
        }
        return 65 <= c && c <= 90;
    }
}
```

##### 2.消除法

遍历一遍字符串，把满足条件的放到新的字符串中，然后比较新字符串和新字符串的反转，这里的内置函数可以换成自己实现的：

```java
public class IsPalindromeCleanString {

    public boolean isPalindrome(String s) {
        StringBuilder sb = new StringBuilder();
        for (char c : s.toLowerCase().toCharArray()) {
            if ((97 <= c && c <= 122) || (48 <= c && c <= 57)) {
                sb.append(c);
            }
        }

        String s2 = sb.toString();
        String s1 = sb.reverse().toString();

        return s2.equals(s1);
    }
}
```

