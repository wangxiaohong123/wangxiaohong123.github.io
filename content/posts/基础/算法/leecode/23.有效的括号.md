---
title: 23.有效的括号
tags:
  - 算法
categories: leecode
copyright: true
---

### 题目

给定一个只包括 '('，')'，'{'，'}'，'['，']' 的字符串 s ，判断字符串是否有效。

有效字符串需满足：

1.   左括号必须用相同类型的右括号闭合。
2.   左括号必须以正确的顺序闭合。
3.   每个右括号都有一个对应的相同类型的左括号。

**示例：**

```
输入：s = "(]"
输出：false
```

**提示：**

-   $ 1 <= s.length <= 10^4 $
-   `s`仅由括号 `'()[]{}'` 组成

### 题解

这种消除、对称之类的都可以使用栈解决。

##### 1.栈法

```java
public class IsValidStack {

    public boolean isValid(String s) {
        Stack<Character> stack = new Stack<>();
        for (char c : s.toCharArray()) {
            if (c == '(' || c == '[' || c == '{') {
                stack.push(c);
            } else {
                if (stack.empty()) {
                    return false;
                }

                if (getOpposite(c) != stack.pop()) {
                    return false;
                }
            }
        }

        return stack.empty();
    }

    private char getOpposite(char c) {
        switch (c) {
            case ')':
                return '(';
            case ']':
                return '[';
            case '}':
                return '{';
            default:
                return '#';
        }
    }
}
```

##### 2.分治法

如果把字符串拆成两个递归下去，就不能使用栈了，当字符串长度小于等于2的时候手动比较，消除成对的括号，然后把剩下的字符串返回，上层方法在遍历两个字符串，左边的字符串从右往左遍历，右边的字符串从左往右遍历，同样的还是消掉成对的括号，然后再把两个字符串拼成一个返回，如果最后字符串中还有括号说明不是有效的。

##### 3.STL标准库

使用一些内置的库也可以解决这个问题，比如说排序后是按照`()[]{}`这种顺序，然后再遍历判断是否全部都是成对的括号，或者使用String的replacAll()，一直消除，直到字符串长度不变化：

```java
public class IsValid_ReplacePattern {

    public boolean isValid(String s) {
        while (s.length() > 0) {
            String s1 = s.replaceAll("\\{\\}", "").replaceAll("\\[\\]", "").replaceAll("\\(\\)", "");
            if (s1.length() == s.length()) {
                break;
            } else {
                s = s1;
            }
        }
        return !(s.length() > 0);
    }
}
```

