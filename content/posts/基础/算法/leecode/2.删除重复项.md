---
title: 2.删除数组中重复的项
tags:
  - 算法
categories: leecode
copyright: true
---

##### 题目：

给你一个有序数组 nums ，请你 原地 删除重复出现的元素，使每个元素 只出现一次 ，返回删除后数组的新长度。不要使用额外的数组空间，你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。

说明:

为什么返回数值是整数，但输出的答案是数组呢?

请注意，输入数组是以「引用」方式传递的，这意味着在函数里修改输入数组对于调用者是可见的。你可以想象内部操作如下:

```java
// nums 是以“引用”方式传递的。也就是说，不对实参做任何拷贝
int len = removeDuplicates(nums);

// 在函数里修改输入数组对于调用者是可见的。
// 根据你的函数返回的长度, 它会打印出数组中 该长度范围内 的所有元素。
for (int i = 0; i < len; i++) {
    print(nums[i]);
}
```

根据题目可以得到一下结论：

*   数组是有序的，那么重复的元素一定相邻。返回的数组是有序并且不重复的，但是要求的是长度，所以实际上要求就是把不重复的元素移动到数组的左侧；
*   空间复杂度需要是O(1)，不能有额外的数组，但是可以有额外的单个变量；
*   并不需要真的删除，只要返回的长度内没有重复的元素就可以，所以我们可以尝试替换元素，而不是删除；

##### 双指针解法

使用一个数值表示结果(retLength)，就是新数组的前n个元素，并且n个元素不存在重复，可以把他当成一个指针，初始是1，然后有一个从0开始的指针，一直向后移动，当发现num[i]和num[i+1]不相等的时候，就把num[i+1]的值赋值给num[retLength]，然后retLength++，遍历完一遍之后retLength指针之前的元素就是不重复的新数组：

```java
public int removeDuplicates(int[] nums) {
    int numsLength = nums.length;
    if (numsLength < 2) {
        return numsLength;
    }
    // [0,1,1,1,2,2]
    int retLength = 1;
    for (int i = 0; i < numsLength - 1; i++) {
        if (nums[i] != nums[i + 1]) {
            nums[retLength] = nums[i + 1];
            retLength++;
        }
    }
    return retLength;
}
```

时间复杂度O(n)，空间复杂度O(1)。

##### 位标记法

这个没啥意思，因为题目里要求空间复杂度为O(1)，所以可以使用BitSet把不重复的元素位置标记下来，然后遍历完一遍之后，再遍历这个BitSet把不重复的元素都放到数组的前面：

```java
public int removeDuplicates(int[] nums) {
    int retLength = 0;
    int curLength = nums.length;
    if (curLength == 0) {
        return retLength;
    }
    BitSet bite = new BitSet();
    bite.set(0);
    retLength = 1;

    for (int i = 1; i < curLength; i++) {
        if (nums[i] != nums[i - 1]) {
            bite.set(i);
            retLength++;
        }
    }

    int tmpIndex = curLength - 1;
    for (int i = bite.length() - 1; i >= 0; i--) {
        if (bite.get(i)) {
            nums[tmpIndex] = nums[i];
            tmpIndex--;
        }
    }


    for (int i = 0; i < retLength; i++) {
        nums[i] = nums[curLength - retLength + i];
    }
    return retLength;
}
```

