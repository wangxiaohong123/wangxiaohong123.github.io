---
title: 行为型-命令模式
tags:
  - 设计模式
categories: 基础
copyright: true
---

将请求封装成一个对象，是不同的请求对客户端进行参数化，对请求排队或记录请求日志，以及支持可以撤销的操作。

![命令模式](https://raw.githubusercontent.com/wangxiaohong123/p-bed/main/uPic/命令模式.png)

```java
public abstract class Command {
    protected Receiver receiver;
    
    public Command(Receiver receiver) {
        this.receiver = receiver;
    }
    
    public abstract void execute();
}

public class ConcreteCommand extends Command {
    public ConcreteCommand(Receiver receiver) {
        super(receiver);
    }
    
    @Override
    public void execute() {
        receiver.action();
    }
}

public class Invoker {
    // 这里要是数组，支持添加、删除
    // 执行命令时就是遍历数组
    private Command command;
    
    public void setCommand(Command command) {
        this.command = command;
    }
    
    public void executeCommand() {
        command.execute();
    }
}

public class Receiver {
    public void action() {
        System.out.println("执行请求");
    }
}

public static void main(String[] args) {
    Receiver r = new Receiver();
    Command c = new ConcreteCommand(r);
    Invoker i = new Invoker();
    
    i.setCommand(c);
    i.executeCommand();
}
```

当不清楚是否需要撤销/恢复操作功能的时候不应该用命令模式，敏捷开发说不要为代码添加基于猜测的、实际不需要的功能。
