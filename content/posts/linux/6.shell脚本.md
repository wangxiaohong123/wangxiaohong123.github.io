---
title: linux-6.shell脚本
tags:
  - linux
categories: 基础
copyright: true
---

shell脚本不光是一些命令的集合，他还可以做一些简单的数据处理，比如自动化的服务器管理、日志的处理等等。

执行脚本的方法：

*   直接执行xx.sh，前提是脚本必须要有可读和可执行的权限；
*   路径执行：/home/xx.sh或者./xx.sh；
*   设置变量，在PATH中增加脚本的路径，或者把脚本放到PATH配置的路径中，然后就可以直接执行脚本了；
*   以bash程序来执行：bash xx.sh或者sh xx.sh，因为/bin/sh是/bin/bash的链接文件，只要脚本有可读属性就可以使用bash的方式执行脚本，还可以加上-n或者-x这种参数检查语法啥的；

上面的执行方式都是创建一个新的子进程来执行脚本，就是说在脚本中修改的变量不会对主进程中的变量有影响，还有一种执行脚本的方式：**source xx.sh**，这个是之前修改变量后刷新的命令，他会在主进程中执行，所以变量才会刷新，换句话说刷新配置时使用**sh ~/.bbash.sh**是不生效的。

搞一个hello world：

```shell
#! /bin/bash
# program:
# 	This program shows "Hello World!" in your screen.
# History:
# 2022/01/01	xiaohong	First release
PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin
export PATH
echo -e "Hello World! \a \n"
exit 0
```

#!/bin/bash表示声明这个脚本使用哪个shell的语法，#和!中间是没有空格的，这种叫做shebang行，脚本被执行的时候会根据这行来加载需要的配置文件，bash的话就是~/.bashrc。没有这一行系统就不知道下面是什么shell，可能就无法执行。

注释下面的两行是环境变量的声明，一般PATH和LANG(用到输出功能的时候)都要设置，这样在脚本执行的时候可以直接执行外部命令，不需要写绝对路径。

exit 0表示退出并返回0，一般命令执行成功后返回的$?等于0就表示执行成功了。

