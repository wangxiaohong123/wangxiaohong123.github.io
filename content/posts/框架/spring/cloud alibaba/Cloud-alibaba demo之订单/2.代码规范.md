---
title: 2.代码规范
tags:
  - cloud-alibaba
categories: 订单demo
copyright: true
---

整体的规范是基于阿⾥巴巴的《Java开发⼿册》，额外补充：

#### 方法命名规范

*   总的原则是⽤动词做前缀，名词在后⾯。
*   获取单个对象的时候使⽤get做前缀。 
*   获取多个对象的时候使⽤list做前缀，复数形式结尾如:listOrders。 
*   获取统计值的时候使⽤count做前缀。 
*   插⼊数据的时候使⽤save/insert做前缀。 
*   删除数据的时候使⽤remove/delete做前缀。 
*   修改数据的时候使⽤update做前缀。

#### POJO类命名规范

*   数据对象用xxxDO，使用DDD时用xxxPO。 
*   Controller层返回结果，展示对象⽤xxxVO，请求⼊参的命名格式⽤xxxRequest，查询条件封装对象⽤xxxQuery。 
*   API层返回结果，返回对象⽤xxxDTO，请求的命名格式为xxxRequest，查询条件封装对象⽤xxxQuery。 
*   业务层内部的数据传输对象⼀般⽤xxxDTO，不做强制规定，怎么⽅便怎么来。
*   每个POJO继承承AbstractObject.java，可以实现不同POJO属性之间的克隆，AbstractObject.java类中包含浅克隆、深克隆、对象集合克隆。

#### 统一异常处理

common模块的exception包下定义了GlobalExceptionHandler组件，该组件通过添加@RestControllerAdvice注解，作为默认的Controller全局异常处理增强组件，在这个组件中分别对系统级别未知系统、客户端异常、服务端异常 都分别做了统⼀处理。 其次是BaseBizException⾃定义基础业务异常类，在业务代码的开发中，可以直接抛出这个异常类，也可以在具体的业务代码⼯程新建⼀个异常类继承BaseBizException，然后抛出⾃定义的异常类。

common模块中还有⼀个CommonErrorCodeEnum枚举类，他继承了BaseErrorCodeEnum，BaseErrorCodeEnum是一个错误信息枚举接⼝，也是供各个业务服务⾃定义错误枚举信息时继承⽤的，通过在抛业务的时候统⼀使⽤枚举定义错误信息，CommonErrorCodeEnum中定义了⼤量框架级别通⽤的常⻅错误信息枚举值。

*   对于Service层，程序需要中断的逻辑，统⼀抛BaseBizException或其⼦类业务异常。
*   DAO层不要显示的抛任何业务异常，统⼀由Service来抛异常。 
*   Controller层不需要显示的try..catch..Service层的业务异常，因为会由GlobalExceptionHandler组件来统⼀处理异常。 
*   抛业务异常时，建议对异常信息定义⼀个枚举值，这个枚举类要继承com.ruyuan.eshop.common.exception.BaseErrorCodeEnum。

#### 统一返回结果处理

接口返回结果统一使用JsonResponse组件作为返回值，当接口返回值不为JsonResponse时由GlobalResponseBodyAdvice统一拦截处理，如果不想使用JsonResponse作为返回值，可以返回JsonMap组件。

GlobalResponseBodyAdvice，通过实现ResponseBodyAdvice接⼝并添加@RestControllerAdvice注解，来实现了全局默认的Controller⽅法返回结果统⼀格式处理，处理逻辑都在beforeBodyWrite()⽅法中。

