---
title: docker编排工具
tags:
  - docker
categories: 基础
copyright: true
---

##### docker compose

docker compose是docker官方的单机多容器管理系统。本质是一个python脚本，通过解析用户编写的yaml文件调用docker api动态创建和管理多个容器。

在mac和windows系统上docker compose是和docker一起安装好的，linux安装docker compose：

```shell
# 下载安装包
sudo curl -L "https://github.com/docker/compose/releases/download/1.27.3/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

# 修改权限
sudo chmod +x /usr/local/bin/docker-compose

# 检查是否安装成功
docker-compose --version
```

docker compose有3个版本，最新的是v3，目前功能最全的版本。docker compose配置文件主要分为三个部分：

*   services：定义容器启动的配置，比如执行docker run命令时传递的参数

    ```yaml
    version: "3.8"
    services:
    	nginx
    ```

    上面就是一个nginx服务，一般在服务名的下一集就开始定义当前服务的各项配置了，常见的配置有16个，例如depends_on等等。

*   networks：定义了容器的网络配置

*   volumes：定义了容器的数据卷配置

##### docker swarm

swarm是docker官方推出的容器集群管理工具，swarm分为管理节点和工作节点。管理节点负责接收用户的请求，交给工作节点执行具体的容器管理任务，例如启动、删除容器。

##### Kubernetes

如果说docker是容器的标准，那k8s就是容器编排的标准。Kubernetes采用声明式api来工作，用户生命想要的状态之后Kubernetes各个组件相互配合，努力达到用户想要的状态。

Kubernetes分为master和node两个角色，master负责调度容器、管理容器的资源，node管理容器的生命周期。
