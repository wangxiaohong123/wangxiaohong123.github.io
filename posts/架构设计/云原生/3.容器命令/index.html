<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>云原生-3.容器命令 | 王小红的笔记</title><meta name=keywords content="架构"><meta name=description content='一  Docker 命令
1 Docker管理命令
Docker管理相关命令大部分都是针对组件增删改查，比如docker config命令


1
2
3
4
5
6
7
8


# 新增一个配置
docker config create
# 检查配置
docker config inspect
# 这是个集群管理命令，在单机上执行会提示is not a swarm manager
docker config ls
# 删除一个配置
docker config rm




 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28


# 管理docker配置
config
# 管理容器
container
# 管理上下文
context
# 管理镜像
image
# 管理网络
network
# 管理集群节点
node
# 管理插件
plugin
# 管理安全组件，比如密码
secret
# 管理swarm中编排的服务
service
# 管理docker部署
stack
# 管理集群
swarm
# 管理磁盘空间、系统事件等等
system
# 对一些内容的信任
trust
# 管理磁盘卷
volume


2 镜像管理
2.1 下载镜像


1
2
3
4
5


docker pull 镜像名:版本号

# 例子，安装最新版本的nginx
docker pull nginx:latest
# latest可以省略，也可以换成具体的版本号


2.2 查看镜像列表


1
2
3


docker image ls
# 这个命令可以简写成下面的
docker images


2.3 查看镜像详情


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121


docker image inspect 镜像id
# 输出的东西很多，重点关注3个，ContainerConfig(容器配置)、GraphDiver(镜像的驱动信息)、RootFS(Docker的文件系统)

[{
        "Id": "sha256:448a08f1d2f94e8db6db9286fd77a3a4f3712786583720a12f1648abb8cace25",
        "RepoTags": [
            "nginx:latest"
        ],
        "RepoDigests": [
            "nginx@sha256:480868e8c8c797794257e2abd88d0f9a8809b2fe956cbfbc05dcc0bca1f7cd43"
        ],
        "Parent": "",
        "Comment": "",
        "Created": "2023-05-03T19:51:06.214253945Z",
        "Container": "a4589847511fc5545db6600740abeb1c991a29ecf9a4b1e3d9b74ae565d373a5",
        "ContainerConfig": {
            "Hostname": "a4589847511f",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            # 堆外提供服务的端口
            "ExposedPorts": {
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            # 环境变量
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "NGINX_VERSION=1.23.4",
                "NJS_VERSION=0.7.11",
                "PKG_RELEASE=1~bullseye"
            ],
            "Cmd": [
                "/bin/sh",
                "-c",
                "#(nop) ",
                "CMD [\"nginx\" \"-g\" \"daemon off;\"]"
            ],
            "Image": "sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": [
                "/docker-entrypoint.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"
            },
            "StopSignal": "SIGQUIT"
        },
        "DockerVersion": "20.10.23",
        "Author": "",
        "Config": {
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "ExposedPorts": {
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "NGINX_VERSION=1.23.4",
                "NJS_VERSION=0.7.11",
                "PKG_RELEASE=1~bullseye"
            ],
            "Cmd": [
                "nginx",
                "-g",
                "daemon off;"
            ],
            "Image": "sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": [
                "/docker-entrypoint.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"
            },
            "StopSignal": "SIGQUIT"
        },
        "Architectrue": "amd64",
        "Os": "linux",
        "Size": 142145739,
        "VirtualSize": 142145739,
        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/b2960f343512dccb38e75c436996f8b7f0a47117aa8dfc894f73751fcf3ff8ca/diff:/var/lib/docker/overlay2/6bd998edf03367283143c60c70f07288834e85f060116360376ffc9a97c50ea6/diff:/var/lib/docker/overlay2/b8f4d283b2079e0747991c2c494db19982a23a67330f72594de73b7c55e3f07e/diff:/var/lib/docker/overlay2/815ccce85a72931d7932e4376ea55e96368ed15e148f12ce776822a889a7755b/diff:/var/lib/docker/overlay2/829946bb9f068d5fa8421d456d7f5b450747f4a9902846b5ea83e3a6af910b0e/diff",
                "MergedDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/merged",
                "UpperDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/diff",
                "WorkDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/work"
            },
            "Name": "overlay2"
        },
        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:8553b91047dad45bedc292812586f1621e0a464a09a7a7c2ce6ac5f8ba2535d7",
                "sha256:a29cc9587af6488ae0cbb962ecbe023d347908cc62ca5d715af06e54ccaa9e36",
                "sha256:6bc8ae8fb3cf0909b3d9c2e74f6cabe16e6a2322c52cec76fbaecaef47006f1d",
                "sha256:5684be535bf11cb9ad1a57b51085f36d84ae8361eabc2b4c2ba9a83e8b084b20",
                "sha256:93ee76f39c974e4f819e632149c002d6f509aadc5995ec6523a96b337751c8ed",
                "sha256:1040838fe30e6f26d31bde96c514f47ee4bf727b3f1c3c7b045ea3891c1c2150"
            ]
        },
        "Metadata": {
            "LastTagTime": "0001-01-01T00:00:00Z"
        }
    }
]


2.4 构建历史


1


docker image history 镜像id


2.5 查看仓库镜像版本
到docker hub上搜索目标镜像，tags栏里有具体的信息。'><meta name=author content><link rel=canonical href=https://wangxiaohong123.github.io/posts/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E4%BA%91%E5%8E%9F%E7%94%9F/3.%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://wangxiaohong123.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wangxiaohong123.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wangxiaohong123.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wangxiaohong123.github.io/apple-touch-icon.png><link rel=mask-icon href=https://wangxiaohong123.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://wangxiaohong123.github.io/posts/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E4%BA%91%E5%8E%9F%E7%94%9F/3.%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wangxiaohong123.github.io/posts/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E4%BA%91%E5%8E%9F%E7%94%9F/3.%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/"><meta property="og:site_name" content="王小红的笔记"><meta property="og:title" content="云原生-3.容器命令"><meta property="og:description" content='一 Docker 命令 1 Docker管理命令 Docker管理相关命令大部分都是针对组件增删改查，比如docker config命令
1 2 3 4 5 6 7 8 # 新增一个配置 docker config create # 检查配置 docker config inspect # 这是个集群管理命令，在单机上执行会提示is not a swarm manager docker config ls # 删除一个配置 docker config rm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # 管理docker配置 config # 管理容器 container # 管理上下文 context # 管理镜像 image # 管理网络 network # 管理集群节点 node # 管理插件 plugin # 管理安全组件，比如密码 secret # 管理swarm中编排的服务 service # 管理docker部署 stack # 管理集群 swarm # 管理磁盘空间、系统事件等等 system # 对一些内容的信任 trust # 管理磁盘卷 volume 2 镜像管理 2.1 下载镜像 1 2 3 4 5 docker pull 镜像名:版本号 # 例子，安装最新版本的nginx docker pull nginx:latest # latest可以省略，也可以换成具体的版本号 2.2 查看镜像列表 1 2 3 docker image ls # 这个命令可以简写成下面的 docker images 2.3 查看镜像详情 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 docker image inspect 镜像id # 输出的东西很多，重点关注3个，ContainerConfig(容器配置)、GraphDiver(镜像的驱动信息)、RootFS(Docker的文件系统) [{ "Id": "sha256:448a08f1d2f94e8db6db9286fd77a3a4f3712786583720a12f1648abb8cace25", "RepoTags": [ "nginx:latest" ], "RepoDigests": [ "nginx@sha256:480868e8c8c797794257e2abd88d0f9a8809b2fe956cbfbc05dcc0bca1f7cd43" ], "Parent": "", "Comment": "", "Created": "2023-05-03T19:51:06.214253945Z", "Container": "a4589847511fc5545db6600740abeb1c991a29ecf9a4b1e3d9b74ae565d373a5", "ContainerConfig": { "Hostname": "a4589847511f", "Domainname": "", "User": "", "AttachStdin": false, "AttachStdout": false, "AttachStderr": false, # 堆外提供服务的端口 "ExposedPorts": { "80/tcp": {} }, "Tty": false, "OpenStdin": false, "StdinOnce": false, # 环境变量 "Env": [ "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION=1.23.4", "NJS_VERSION=0.7.11", "PKG_RELEASE=1~bullseye" ], "Cmd": [ "/bin/sh", "-c", "#(nop) ", "CMD [\"nginx\" \"-g\" \"daemon off;\"]" ], "Image": "sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564", "Volumes": null, "WorkingDir": "", "Entrypoint": [ "/docker-entrypoint.sh" ], "OnBuild": null, "Labels": { "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>" }, "StopSignal": "SIGQUIT" }, "DockerVersion": "20.10.23", "Author": "", "Config": { "Hostname": "", "Domainname": "", "User": "", "AttachStdin": false, "AttachStdout": false, "AttachStderr": false, "ExposedPorts": { "80/tcp": {} }, "Tty": false, "OpenStdin": false, "StdinOnce": false, "Env": [ "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION=1.23.4", "NJS_VERSION=0.7.11", "PKG_RELEASE=1~bullseye" ], "Cmd": [ "nginx", "-g", "daemon off;" ], "Image": "sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564", "Volumes": null, "WorkingDir": "", "Entrypoint": [ "/docker-entrypoint.sh" ], "OnBuild": null, "Labels": { "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>" }, "StopSignal": "SIGQUIT" }, "Architectrue": "amd64", "Os": "linux", "Size": 142145739, "VirtualSize": 142145739, "GraphDriver": { "Data": { "LowerDir": "/var/lib/docker/overlay2/b2960f343512dccb38e75c436996f8b7f0a47117aa8dfc894f73751fcf3ff8ca/diff:/var/lib/docker/overlay2/6bd998edf03367283143c60c70f07288834e85f060116360376ffc9a97c50ea6/diff:/var/lib/docker/overlay2/b8f4d283b2079e0747991c2c494db19982a23a67330f72594de73b7c55e3f07e/diff:/var/lib/docker/overlay2/815ccce85a72931d7932e4376ea55e96368ed15e148f12ce776822a889a7755b/diff:/var/lib/docker/overlay2/829946bb9f068d5fa8421d456d7f5b450747f4a9902846b5ea83e3a6af910b0e/diff", "MergedDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/merged", "UpperDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/diff", "WorkDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/work" }, "Name": "overlay2" }, "RootFS": { "Type": "layers", "Layers": [ "sha256:8553b91047dad45bedc292812586f1621e0a464a09a7a7c2ce6ac5f8ba2535d7", "sha256:a29cc9587af6488ae0cbb962ecbe023d347908cc62ca5d715af06e54ccaa9e36", "sha256:6bc8ae8fb3cf0909b3d9c2e74f6cabe16e6a2322c52cec76fbaecaef47006f1d", "sha256:5684be535bf11cb9ad1a57b51085f36d84ae8361eabc2b4c2ba9a83e8b084b20", "sha256:93ee76f39c974e4f819e632149c002d6f509aadc5995ec6523a96b337751c8ed", "sha256:1040838fe30e6f26d31bde96c514f47ee4bf727b3f1c3c7b045ea3891c1c2150" ] }, "Metadata": { "LastTagTime": "0001-01-01T00:00:00Z" } } ] 2.4 构建历史 1 docker image history 镜像id 2.5 查看仓库镜像版本 到docker hub上搜索目标镜像，tags栏里有具体的信息。'><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-22T06:27:35+00:00"><meta property="article:modified_time" content="2023-05-22T06:27:35+00:00"><meta property="article:tag" content="架构"><meta name=twitter:card content="summary"><meta name=twitter:title content="云原生-3.容器命令"><meta name=twitter:description content='一  Docker 命令
1 Docker管理命令
Docker管理相关命令大部分都是针对组件增删改查，比如docker config命令


1
2
3
4
5
6
7
8


# 新增一个配置
docker config create
# 检查配置
docker config inspect
# 这是个集群管理命令，在单机上执行会提示is not a swarm manager
docker config ls
# 删除一个配置
docker config rm




 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28


# 管理docker配置
config
# 管理容器
container
# 管理上下文
context
# 管理镜像
image
# 管理网络
network
# 管理集群节点
node
# 管理插件
plugin
# 管理安全组件，比如密码
secret
# 管理swarm中编排的服务
service
# 管理docker部署
stack
# 管理集群
swarm
# 管理磁盘空间、系统事件等等
system
# 对一些内容的信任
trust
# 管理磁盘卷
volume


2 镜像管理
2.1 下载镜像


1
2
3
4
5


docker pull 镜像名:版本号

# 例子，安装最新版本的nginx
docker pull nginx:latest
# latest可以省略，也可以换成具体的版本号


2.2 查看镜像列表


1
2
3


docker image ls
# 这个命令可以简写成下面的
docker images


2.3 查看镜像详情


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121


docker image inspect 镜像id
# 输出的东西很多，重点关注3个，ContainerConfig(容器配置)、GraphDiver(镜像的驱动信息)、RootFS(Docker的文件系统)

[{
        "Id": "sha256:448a08f1d2f94e8db6db9286fd77a3a4f3712786583720a12f1648abb8cace25",
        "RepoTags": [
            "nginx:latest"
        ],
        "RepoDigests": [
            "nginx@sha256:480868e8c8c797794257e2abd88d0f9a8809b2fe956cbfbc05dcc0bca1f7cd43"
        ],
        "Parent": "",
        "Comment": "",
        "Created": "2023-05-03T19:51:06.214253945Z",
        "Container": "a4589847511fc5545db6600740abeb1c991a29ecf9a4b1e3d9b74ae565d373a5",
        "ContainerConfig": {
            "Hostname": "a4589847511f",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            # 堆外提供服务的端口
            "ExposedPorts": {
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            # 环境变量
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "NGINX_VERSION=1.23.4",
                "NJS_VERSION=0.7.11",
                "PKG_RELEASE=1~bullseye"
            ],
            "Cmd": [
                "/bin/sh",
                "-c",
                "#(nop) ",
                "CMD [\"nginx\" \"-g\" \"daemon off;\"]"
            ],
            "Image": "sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": [
                "/docker-entrypoint.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"
            },
            "StopSignal": "SIGQUIT"
        },
        "DockerVersion": "20.10.23",
        "Author": "",
        "Config": {
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "ExposedPorts": {
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "NGINX_VERSION=1.23.4",
                "NJS_VERSION=0.7.11",
                "PKG_RELEASE=1~bullseye"
            ],
            "Cmd": [
                "nginx",
                "-g",
                "daemon off;"
            ],
            "Image": "sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": [
                "/docker-entrypoint.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"
            },
            "StopSignal": "SIGQUIT"
        },
        "Architectrue": "amd64",
        "Os": "linux",
        "Size": 142145739,
        "VirtualSize": 142145739,
        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/b2960f343512dccb38e75c436996f8b7f0a47117aa8dfc894f73751fcf3ff8ca/diff:/var/lib/docker/overlay2/6bd998edf03367283143c60c70f07288834e85f060116360376ffc9a97c50ea6/diff:/var/lib/docker/overlay2/b8f4d283b2079e0747991c2c494db19982a23a67330f72594de73b7c55e3f07e/diff:/var/lib/docker/overlay2/815ccce85a72931d7932e4376ea55e96368ed15e148f12ce776822a889a7755b/diff:/var/lib/docker/overlay2/829946bb9f068d5fa8421d456d7f5b450747f4a9902846b5ea83e3a6af910b0e/diff",
                "MergedDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/merged",
                "UpperDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/diff",
                "WorkDir": "/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/work"
            },
            "Name": "overlay2"
        },
        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:8553b91047dad45bedc292812586f1621e0a464a09a7a7c2ce6ac5f8ba2535d7",
                "sha256:a29cc9587af6488ae0cbb962ecbe023d347908cc62ca5d715af06e54ccaa9e36",
                "sha256:6bc8ae8fb3cf0909b3d9c2e74f6cabe16e6a2322c52cec76fbaecaef47006f1d",
                "sha256:5684be535bf11cb9ad1a57b51085f36d84ae8361eabc2b4c2ba9a83e8b084b20",
                "sha256:93ee76f39c974e4f819e632149c002d6f509aadc5995ec6523a96b337751c8ed",
                "sha256:1040838fe30e6f26d31bde96c514f47ee4bf727b3f1c3c7b045ea3891c1c2150"
            ]
        },
        "Metadata": {
            "LastTagTime": "0001-01-01T00:00:00Z"
        }
    }
]


2.4 构建历史


1


docker image history 镜像id


2.5 查看仓库镜像版本
到docker hub上搜索目标镜像，tags栏里有具体的信息。'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wangxiaohong123.github.io/posts/"},{"@type":"ListItem","position":2,"name":"云原生-3.容器命令","item":"https://wangxiaohong123.github.io/posts/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E4%BA%91%E5%8E%9F%E7%94%9F/3.%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"云原生-3.容器命令","name":"云原生-3.容器命令","description":"一 Docker 命令 1 Docker管理命令 Docker管理相关命令大部分都是针对组件增删改查，比如docker config命令\n1 2 3 4 5 6 7 8 # 新增一个配置 docker config create # 检查配置 docker config inspect # 这是个集群管理命令，在单机上执行会提示is not a swarm manager docker config ls # 删除一个配置 docker config rm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # 管理docker配置 config # 管理容器 container # 管理上下文 context # 管理镜像 image # 管理网络 network # 管理集群节点 node # 管理插件 plugin # 管理安全组件，比如密码 secret # 管理swarm中编排的服务 service # 管理docker部署 stack # 管理集群 swarm # 管理磁盘空间、系统事件等等 system # 对一些内容的信任 trust # 管理磁盘卷 volume 2 镜像管理 2.1 下载镜像 1 2 3 4 5 docker pull 镜像名:版本号 # 例子，安装最新版本的nginx docker pull nginx:latest # latest可以省略，也可以换成具体的版本号 2.2 查看镜像列表 1 2 3 docker image ls # 这个命令可以简写成下面的 docker images 2.3 查看镜像详情 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 docker image inspect 镜像id # 输出的东西很多，重点关注3个，ContainerConfig(容器配置)、GraphDiver(镜像的驱动信息)、RootFS(Docker的文件系统) [{ \u0026#34;Id\u0026#34;: \u0026#34;sha256:448a08f1d2f94e8db6db9286fd77a3a4f3712786583720a12f1648abb8cace25\u0026#34;, \u0026#34;RepoTags\u0026#34;: [ \u0026#34;nginx:latest\u0026#34; ], \u0026#34;RepoDigests\u0026#34;: [ \u0026#34;nginx@sha256:480868e8c8c797794257e2abd88d0f9a8809b2fe956cbfbc05dcc0bca1f7cd43\u0026#34; ], \u0026#34;Parent\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;Comment\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;Created\u0026#34;: \u0026#34;2023-05-03T19:51:06.214253945Z\u0026#34;, \u0026#34;Container\u0026#34;: \u0026#34;a4589847511fc5545db6600740abeb1c991a29ecf9a4b1e3d9b74ae565d373a5\u0026#34;, \u0026#34;ContainerConfig\u0026#34;: { \u0026#34;Hostname\u0026#34;: \u0026#34;a4589847511f\u0026#34;, \u0026#34;Domainname\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;User\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;AttachStdin\u0026#34;: false, \u0026#34;AttachStdout\u0026#34;: false, \u0026#34;AttachStderr\u0026#34;: false, # 堆外提供服务的端口 \u0026#34;ExposedPorts\u0026#34;: { \u0026#34;80/tcp\u0026#34;: {} }, \u0026#34;Tty\u0026#34;: false, \u0026#34;OpenStdin\u0026#34;: false, \u0026#34;StdinOnce\u0026#34;: false, # 环境变量 \u0026#34;Env\u0026#34;: [ \u0026#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\u0026#34;, \u0026#34;NGINX_VERSION=1.23.4\u0026#34;, \u0026#34;NJS_VERSION=0.7.11\u0026#34;, \u0026#34;PKG_RELEASE=1~bullseye\u0026#34; ], \u0026#34;Cmd\u0026#34;: [ \u0026#34;/bin/sh\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;#(nop) \u0026#34;, \u0026#34;CMD [\\\u0026#34;nginx\\\u0026#34; \\\u0026#34;-g\\\u0026#34; \\\u0026#34;daemon off;\\\u0026#34;]\u0026#34; ], \u0026#34;Image\u0026#34;: \u0026#34;sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564\u0026#34;, \u0026#34;Volumes\u0026#34;: null, \u0026#34;WorkingDir\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;Entrypoint\u0026#34;: [ \u0026#34;/docker-entrypoint.sh\u0026#34; ], \u0026#34;OnBuild\u0026#34;: null, \u0026#34;Labels\u0026#34;: { \u0026#34;maintainer\u0026#34;: \u0026#34;NGINX Docker Maintainers \u0026lt;docker-maint@nginx.com\u0026gt;\u0026#34; }, \u0026#34;StopSignal\u0026#34;: \u0026#34;SIGQUIT\u0026#34; }, \u0026#34;DockerVersion\u0026#34;: \u0026#34;20.10.23\u0026#34;, \u0026#34;Author\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;Config\u0026#34;: { \u0026#34;Hostname\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;Domainname\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;User\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;AttachStdin\u0026#34;: false, \u0026#34;AttachStdout\u0026#34;: false, \u0026#34;AttachStderr\u0026#34;: false, \u0026#34;ExposedPorts\u0026#34;: { \u0026#34;80/tcp\u0026#34;: {} }, \u0026#34;Tty\u0026#34;: false, \u0026#34;OpenStdin\u0026#34;: false, \u0026#34;StdinOnce\u0026#34;: false, \u0026#34;Env\u0026#34;: [ \u0026#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\u0026#34;, \u0026#34;NGINX_VERSION=1.23.4\u0026#34;, \u0026#34;NJS_VERSION=0.7.11\u0026#34;, \u0026#34;PKG_RELEASE=1~bullseye\u0026#34; ], \u0026#34;Cmd\u0026#34;: [ \u0026#34;nginx\u0026#34;, \u0026#34;-g\u0026#34;, \u0026#34;daemon off;\u0026#34; ], \u0026#34;Image\u0026#34;: \u0026#34;sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564\u0026#34;, \u0026#34;Volumes\u0026#34;: null, \u0026#34;WorkingDir\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;Entrypoint\u0026#34;: [ \u0026#34;/docker-entrypoint.sh\u0026#34; ], \u0026#34;OnBuild\u0026#34;: null, \u0026#34;Labels\u0026#34;: { \u0026#34;maintainer\u0026#34;: \u0026#34;NGINX Docker Maintainers \u0026lt;docker-maint@nginx.com\u0026gt;\u0026#34; }, \u0026#34;StopSignal\u0026#34;: \u0026#34;SIGQUIT\u0026#34; }, \u0026#34;Architectrue\u0026#34;: \u0026#34;amd64\u0026#34;, \u0026#34;Os\u0026#34;: \u0026#34;linux\u0026#34;, \u0026#34;Size\u0026#34;: 142145739, \u0026#34;VirtualSize\u0026#34;: 142145739, \u0026#34;GraphDriver\u0026#34;: { \u0026#34;Data\u0026#34;: { \u0026#34;LowerDir\u0026#34;: \u0026#34;/var/lib/docker/overlay2/b2960f343512dccb38e75c436996f8b7f0a47117aa8dfc894f73751fcf3ff8ca/diff:/var/lib/docker/overlay2/6bd998edf03367283143c60c70f07288834e85f060116360376ffc9a97c50ea6/diff:/var/lib/docker/overlay2/b8f4d283b2079e0747991c2c494db19982a23a67330f72594de73b7c55e3f07e/diff:/var/lib/docker/overlay2/815ccce85a72931d7932e4376ea55e96368ed15e148f12ce776822a889a7755b/diff:/var/lib/docker/overlay2/829946bb9f068d5fa8421d456d7f5b450747f4a9902846b5ea83e3a6af910b0e/diff\u0026#34;, \u0026#34;MergedDir\u0026#34;: \u0026#34;/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/merged\u0026#34;, \u0026#34;UpperDir\u0026#34;: \u0026#34;/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/diff\u0026#34;, \u0026#34;WorkDir\u0026#34;: \u0026#34;/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/work\u0026#34; }, \u0026#34;Name\u0026#34;: \u0026#34;overlay2\u0026#34; }, \u0026#34;RootFS\u0026#34;: { \u0026#34;Type\u0026#34;: \u0026#34;layers\u0026#34;, \u0026#34;Layers\u0026#34;: [ \u0026#34;sha256:8553b91047dad45bedc292812586f1621e0a464a09a7a7c2ce6ac5f8ba2535d7\u0026#34;, \u0026#34;sha256:a29cc9587af6488ae0cbb962ecbe023d347908cc62ca5d715af06e54ccaa9e36\u0026#34;, \u0026#34;sha256:6bc8ae8fb3cf0909b3d9c2e74f6cabe16e6a2322c52cec76fbaecaef47006f1d\u0026#34;, \u0026#34;sha256:5684be535bf11cb9ad1a57b51085f36d84ae8361eabc2b4c2ba9a83e8b084b20\u0026#34;, \u0026#34;sha256:93ee76f39c974e4f819e632149c002d6f509aadc5995ec6523a96b337751c8ed\u0026#34;, \u0026#34;sha256:1040838fe30e6f26d31bde96c514f47ee4bf727b3f1c3c7b045ea3891c1c2150\u0026#34; ] }, \u0026#34;Metadata\u0026#34;: { \u0026#34;LastTagTime\u0026#34;: \u0026#34;0001-01-01T00:00:00Z\u0026#34; } } ] 2.4 构建历史 1 docker image history 镜像id 2.5 查看仓库镜像版本 到docker hub上搜索目标镜像，tags栏里有具体的信息。\n","keywords":["架构"],"articleBody":"一 Docker 命令 1 Docker管理命令 Docker管理相关命令大部分都是针对组件增删改查，比如docker config命令\n1 2 3 4 5 6 7 8 # 新增一个配置 docker config create # 检查配置 docker config inspect # 这是个集群管理命令，在单机上执行会提示is not a swarm manager docker config ls # 删除一个配置 docker config rm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # 管理docker配置 config # 管理容器 container # 管理上下文 context # 管理镜像 image # 管理网络 network # 管理集群节点 node # 管理插件 plugin # 管理安全组件，比如密码 secret # 管理swarm中编排的服务 service # 管理docker部署 stack # 管理集群 swarm # 管理磁盘空间、系统事件等等 system # 对一些内容的信任 trust # 管理磁盘卷 volume 2 镜像管理 2.1 下载镜像 1 2 3 4 5 docker pull 镜像名:版本号 # 例子，安装最新版本的nginx docker pull nginx:latest # latest可以省略，也可以换成具体的版本号 2.2 查看镜像列表 1 2 3 docker image ls # 这个命令可以简写成下面的 docker images 2.3 查看镜像详情 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 docker image inspect 镜像id # 输出的东西很多，重点关注3个，ContainerConfig(容器配置)、GraphDiver(镜像的驱动信息)、RootFS(Docker的文件系统) [{ \"Id\": \"sha256:448a08f1d2f94e8db6db9286fd77a3a4f3712786583720a12f1648abb8cace25\", \"RepoTags\": [ \"nginx:latest\" ], \"RepoDigests\": [ \"nginx@sha256:480868e8c8c797794257e2abd88d0f9a8809b2fe956cbfbc05dcc0bca1f7cd43\" ], \"Parent\": \"\", \"Comment\": \"\", \"Created\": \"2023-05-03T19:51:06.214253945Z\", \"Container\": \"a4589847511fc5545db6600740abeb1c991a29ecf9a4b1e3d9b74ae565d373a5\", \"ContainerConfig\": { \"Hostname\": \"a4589847511f\", \"Domainname\": \"\", \"User\": \"\", \"AttachStdin\": false, \"AttachStdout\": false, \"AttachStderr\": false, # 堆外提供服务的端口 \"ExposedPorts\": { \"80/tcp\": {} }, \"Tty\": false, \"OpenStdin\": false, \"StdinOnce\": false, # 环境变量 \"Env\": [ \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\", \"NGINX_VERSION=1.23.4\", \"NJS_VERSION=0.7.11\", \"PKG_RELEASE=1~bullseye\" ], \"Cmd\": [ \"/bin/sh\", \"-c\", \"#(nop) \", \"CMD [\\\"nginx\\\" \\\"-g\\\" \\\"daemon off;\\\"]\" ], \"Image\": \"sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564\", \"Volumes\": null, \"WorkingDir\": \"\", \"Entrypoint\": [ \"/docker-entrypoint.sh\" ], \"OnBuild\": null, \"Labels\": { \"maintainer\": \"NGINX Docker Maintainers \" }, \"StopSignal\": \"SIGQUIT\" }, \"DockerVersion\": \"20.10.23\", \"Author\": \"\", \"Config\": { \"Hostname\": \"\", \"Domainname\": \"\", \"User\": \"\", \"AttachStdin\": false, \"AttachStdout\": false, \"AttachStderr\": false, \"ExposedPorts\": { \"80/tcp\": {} }, \"Tty\": false, \"OpenStdin\": false, \"StdinOnce\": false, \"Env\": [ \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\", \"NGINX_VERSION=1.23.4\", \"NJS_VERSION=0.7.11\", \"PKG_RELEASE=1~bullseye\" ], \"Cmd\": [ \"nginx\", \"-g\", \"daemon off;\" ], \"Image\": \"sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564\", \"Volumes\": null, \"WorkingDir\": \"\", \"Entrypoint\": [ \"/docker-entrypoint.sh\" ], \"OnBuild\": null, \"Labels\": { \"maintainer\": \"NGINX Docker Maintainers \" }, \"StopSignal\": \"SIGQUIT\" }, \"Architectrue\": \"amd64\", \"Os\": \"linux\", \"Size\": 142145739, \"VirtualSize\": 142145739, \"GraphDriver\": { \"Data\": { \"LowerDir\": \"/var/lib/docker/overlay2/b2960f343512dccb38e75c436996f8b7f0a47117aa8dfc894f73751fcf3ff8ca/diff:/var/lib/docker/overlay2/6bd998edf03367283143c60c70f07288834e85f060116360376ffc9a97c50ea6/diff:/var/lib/docker/overlay2/b8f4d283b2079e0747991c2c494db19982a23a67330f72594de73b7c55e3f07e/diff:/var/lib/docker/overlay2/815ccce85a72931d7932e4376ea55e96368ed15e148f12ce776822a889a7755b/diff:/var/lib/docker/overlay2/829946bb9f068d5fa8421d456d7f5b450747f4a9902846b5ea83e3a6af910b0e/diff\", \"MergedDir\": \"/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/merged\", \"UpperDir\": \"/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/diff\", \"WorkDir\": \"/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/work\" }, \"Name\": \"overlay2\" }, \"RootFS\": { \"Type\": \"layers\", \"Layers\": [ \"sha256:8553b91047dad45bedc292812586f1621e0a464a09a7a7c2ce6ac5f8ba2535d7\", \"sha256:a29cc9587af6488ae0cbb962ecbe023d347908cc62ca5d715af06e54ccaa9e36\", \"sha256:6bc8ae8fb3cf0909b3d9c2e74f6cabe16e6a2322c52cec76fbaecaef47006f1d\", \"sha256:5684be535bf11cb9ad1a57b51085f36d84ae8361eabc2b4c2ba9a83e8b084b20\", \"sha256:93ee76f39c974e4f819e632149c002d6f509aadc5995ec6523a96b337751c8ed\", \"sha256:1040838fe30e6f26d31bde96c514f47ee4bf727b3f1c3c7b045ea3891c1c2150\" ] }, \"Metadata\": { \"LastTagTime\": \"0001-01-01T00:00:00Z\" } } ] 2.4 构建历史 1 docker image history 镜像id 2.5 查看仓库镜像版本 到docker hub上搜索目标镜像，tags栏里有具体的信息。\n2.6 删除镜像 1 2 3 4 5 6 7 8 9 10 docker image rm 镜像id # 上面的命令可以简写成下面这样 docker rmi 镜像id # 删除所有镜像，正在运行或者被其他容器使用的删不掉 docker rmi $(docker images -q) # 删除不在使用的镜像 docker image prune -a 2.7 备份镜像 1 2 3 4 5 6 # -o表示输出到文件 docker save -o nginx.tar nginx:latest # 和这个对应的是加载镜像 # -i表示从文件读取 docker image load -i nginx.tar 2.8 导入镜像 1 2 # 这个命令可以加载本地文件，也可以加载url或者仓库的一个镜像 docker image import nginx.tar 2.9 构建镜像 1 2 3 # -t是指定镜像名和镜像tag # .的意思是DockerFile所在路径，相对和绝对路径都可以 docker build -t 镜像名/镜像tag . 2.10 给镜像打tag 1 docker image tag 源镜像名:源tag 新镜像名:新tag 2.11 推送镜像到远程仓库 1 docker push 镜像名:tag 3 容器管理 3.1 运行容器 1 2 3 4 5 6 7 8 9 10 11 # -i：交互式操作 # -t：终端 # -d：守护进程运行 # -p：设置宿主机和容器端口映射，有了这个才能在外部访问容器的进程 docker run [--name 名字] -itd -p 8080:80 nginx:latest # 这个只能启动已经存在的容器 docker start 容器id # 重启容器 docker restart 容器id 3.2 创建容器 1 2 # 创建完容器是stop状态 docker create 镜像名:tag 3.3 查看容器列表 1 2 3 4 5 6 docker container ls # 上面可以缩写成这样 # 查看运行中的容器 # 查看所有容器是docker ps -a docker ps 3.4 停止容器 1 docker stop 容器id 3.5 杀死容器 1 2 # 这个相当于kill -9，一般不用 docker kill 容器id 3.6 挂起容器 1 2 3 4 5 # 挂起之后不会释放内存但是不会使用CPU docker pause 容器id # 解除挂起 docker unpause 容器id 3.7 删除容器 1 2 3 4 5 6 # rm命令不能删除运行中容器，可以使用-f强制删除，一般不会这么勇 docker rm 容器id # 删除没有使用的容器 # 有些容器没有运行，但是还会被其他运行的容器引用。这种是不会被删除的 docker prune 3.8 查看容器日志 1 2 3 # 和tail命令差不多，-f就是常驻 # --tail=20显示最后20行 docker logs -f --tail=20 容器id 3.9 进入容器 1 2 3 4 5 # -it表示交互方式 docker exec -it 容器id /bin/bash # 退出 exit 3.10 拷贝容器文件 1 2 3 # 把容器文件拷贝到宿主机 # 如果反过来写就是把宿主机文件拷贝到容器 docker cp 容器id:文件位置 目标位置 3.11 重命名 1 docker rename 容器id 新name 3.12 查看容器文件系统变化 1 2 3 4 5 docker diff 容器id # 结果中C是修改，A是新增，D是删除 # C /var/cache/nginx # A /var/cache/nginx/client_temp 3.13 查看容器信息 1 2 3 4 5 6 7 8 # 查看容器占用的CPU、内存、网络等 docker stats 容器id # 查看容器在宿主机的进程号 docker top 容器id # 查看容器信息，和镜像一样的 docker inspect 容器id 4 仓库管理命令 4.1 登录docker hub 1 2 3 4 5 docker login # 然后根据提示输入用户名密码就可以了 # 登出 docker logout 4.2 搜索镜像 1 docker search 镜像名 4.3 下载镜像 1 docker pull 镜像名:tag 4.4 推送镜像 1 docker push 账号/镜像:tag 5 网络命令 6 存储命令 docker的数据持久化有3种方式：\n6.1 volumes 固定的文件路径，由docker管理，也可以指定volumes在宿主机上的路径。如果不指定docker会默认创建在宿主机上的/var/lib/docker/lolumes/容器id 目录里，这样有个不好的地方就是根据一个镜像启动的多个容器文件不共享，所以一般要给volume创建一个别名，在启动容器时指定volume的别名：\n1 2 3 4 5 6 # 创建一个叫test_volume的volume docker volume create test_volume # 启动容器，把/usr/share/nginx/html目录挂载到刚刚创建的volume上 # -v和--volume是等效的 docker run -itd --name nginx_1 -p 8080:80 -v ruyuan_volume:/usr/share/nginx/html 镜像名:tag 使用-v时，如果宿主机目录不存在会自动创建。\nvolume的管理命令：\n1 2 3 4 5 6 7 8 # 查看test_volume详情 docker inspect test_volume # 查看volume列表 docker volume ls # 删除volume相关 docker volume prune docker volume rm 6.2 bind mount 挂载到宿主机的其他目录使用方式也是-v或者–volume：\n1 2 3 # /data/nginx/是宿主机中的路径，必须是绝对路径 # /usr/share/nginx/html表示容器中被挂载的路径 docker run -itd --name 容器别名 -v /data/nginx/:/usr/share/nginx/html 镜像名:tag 另一种挂载的方式是使用–mount：\n1 2 3 # source表示宿主机中路径 # destination表示容器中被挂载的路径 docker run -itd --name 容器别名 --mount type=bind,source=/data/nginx,destination=/usr/share/nginx 镜像名:tag 使用–mount时不指定type是使用volume方式存储，当source路径不存在时会报错。\n6.3 tmpfs mounts 存放到宿主机内存中。\n1 2 # /usr/share/nginx/html表示容器中被挂载的目录 docker run -itd --name 容器别名 --tmpfs /usr/share/nginx/html 镜像名:tag 这种方式因为读写是在内存，所以速度特别快。\n二 Docker File docker file是用来构建镜像的文件，使用docker build命令将docker file文件构建成镜像：\n1 2 # .表示上下文路径，构建时会把这个路径里的文件打包给docker容器，所以这个里面不要有多余的文件 docker build -t 镜像名:tag --file file文件路径 . 1 docker file 命令： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 # 必须以FROM开头 # FROM定义了这个镜像的构建是基于哪个基础镜像 # FROM命令可以多次使用 FROM nginx # 指定镜像的作者 MAINTAINER xiaohong # 执行shell或者exec的命令 # RUN可以有多个，但是每次执行RUN都会让镜像多加一层，可以使用\u0026\u0026拼接命令，这样只会打包一层 RUN echo ' nginx ' \u003e /usr/share/nginx/html/index.html ADD Dockfile ContainerDockfile # 和RUN一样，不过RUN是在build的时候运行，CMD在docker run命令执行时运行 # CMD只会执行一次，最后面的CMD会把前面的覆盖 CMD # 类似CMD，可以接收启动镜像时的参数作为输入，也只能存在一个ENTRYPOINT命令 ENTRYPOINT # 指定RUN、CMD、ENTRYPOINT的工作目录 WORKDIR # 复制文件到镜像中 # source表示宿主机中的文件路径，destination是容器中的路径 ADD source destination # 和ADD类似，ADD不能复制tar这种压缩文件，但是他自己会先解压，不过也会影响速度，推荐使用COPY COPY # 指定容器运行时监听的端口 EXPOSE 8080 # 定义环境变量，后续的指令都可以使用这个变量 ENV = =... # 设置挂载的宿主机路径 VOLUME /usr/share/docker # 指定执行后续命令的用户和用户组 USER 用户名[:用户组] 2 查看镜像的构建记录： 1 docker history ae893c58d83f --no-trunc 3 file例子 1 2 3 4 5 6 FROM openjdk:8 COPY ./src /home/xiaohong/src WORKDIR /home/xiaohong/src RUN cd /home/xiaohong/src RUN ls RUN javac Main.java 构建并上传：\n1 2 3 4 5 6 7 8 9 docker build -t my-java-app . # 先登录到远程仓库 docker login # 打tag docker tag my-java-app v1.0.0 # 推送到远程仓库 docker image push my-java-app:v1.0.0 三 Docker Compose docker compose是用来定义和运行多容器的工具，可以在yml中配置所有需要的命令，然后执行一个命令运行所有容器。\n1 常用yml指令 version：指定compose版本，比如1.2.x、3.x，目前主流的是3.x，他支持docker1.13及以上版本。 services：定义所有的service信息，service下面的第一级的key就是service的名称。 build：指定docker file所在的文件夹路径或者指定具体的docker file。 image：指定服务使用的镜像。 ports：定义宿主机和容器端口的映射。 expose：指定容器用到的端口，并不对外暴露，而ports映射之后可以在外面访问。 volumes：把宿主机的目录挂载到容器里，可以自定义volume的名称，也可以直接使用路径。 depends_on：设置依赖关系，使用docker-compose up启动时会先启动依赖的服务。 restart：默认no，可以设置成always，这样docker重启时容器也会重启。 networks：指定容器的网络。 environment：添加环境变量，需要注意boolean值要用单引号括起来，要不会被yml解析器解析成True或者False。 command：替换容器启动的默认命令。 container_name：指定容器名。 healthcheck：检测docker服务是否在健康运行。 extends：继承某个compose文件。 2 docker-compose命令 使用docker-compose命令时不指定yml文件会在当前目录里查找docker-compose.yml文件。\n2.1 容器声明周期 1 2 3 4 5 6 7 8 9 # 创建或启动容器 # -d表示后台运行 docker-compose -f docker-compose文件路径 up -d # 停止并删除容器 docker-compose -f docker-compose文件路径 down # 停止容器 docker-compose -f docker-compose文件路径 stop 2.2 查看进程信息 1 2 # 打印docker-compose文件中所有服务的进程信息 docker-compose -f docker-compose文件路径 top 2.3 查看容器日志 1 2 # -f表示追加打印 docker-compose -f docker-compose文件路径 logs -f 3 个人开发环境docker-compose.yml 1 version: '3.9' ","wordCount":"1209","inLanguage":"en","datePublished":"2023-05-22T06:27:35Z","dateModified":"2023-05-22T06:27:35Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://wangxiaohong123.github.io/posts/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E4%BA%91%E5%8E%9F%E7%94%9F/3.%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/"},"publisher":{"@type":"Organization","name":"王小红的笔记","logo":{"@type":"ImageObject","url":"https://wangxiaohong123.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wangxiaohong123.github.io/ accesskey=h title="王小红的笔记 (Alt + H)">王小红的笔记</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wangxiaohong123.github.io/posts/ title=笔记><span>笔记</span></a></li><li><a href=https://wangxiaohong123.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://wangxiaohong123.github.io/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">云原生-3.容器命令</h1><div class=post-meta><span title='2023-05-22 06:27:35 +0000 UTC'>May 22, 2023</span>&nbsp;·&nbsp;6 min</div></header><div class=post-content><h3 id=一--docker-命令>一 Docker 命令<a hidden class=anchor aria-hidden=true href=#一--docker-命令>#</a></h3><h5 id=1-docker管理命令>1 Docker管理命令<a hidden class=anchor aria-hidden=true href=#1-docker管理命令>#</a></h5><p>Docker管理相关命令大部分都是针对组件增删改查，比如docker config命令</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 新增一个配置</span>
</span></span><span style=display:flex><span>docker config create
</span></span><span style=display:flex><span><span style=color:#6272a4># 检查配置</span>
</span></span><span style=display:flex><span>docker config inspect
</span></span><span style=display:flex><span><span style=color:#6272a4># 这是个集群管理命令，在单机上执行会提示is not a swarm manager</span>
</span></span><span style=display:flex><span>docker config ls
</span></span><span style=display:flex><span><span style=color:#6272a4># 删除一个配置</span>
</span></span><span style=display:flex><span>docker config rm
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 管理docker配置</span>
</span></span><span style=display:flex><span>config
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理容器</span>
</span></span><span style=display:flex><span>container
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理上下文</span>
</span></span><span style=display:flex><span>context
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理镜像</span>
</span></span><span style=display:flex><span>image
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理网络</span>
</span></span><span style=display:flex><span>network
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理集群节点</span>
</span></span><span style=display:flex><span>node
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理插件</span>
</span></span><span style=display:flex><span>plugin
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理安全组件，比如密码</span>
</span></span><span style=display:flex><span>secret
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理swarm中编排的服务</span>
</span></span><span style=display:flex><span>service
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理docker部署</span>
</span></span><span style=display:flex><span>stack
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理集群</span>
</span></span><span style=display:flex><span>swarm
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理磁盘空间、系统事件等等</span>
</span></span><span style=display:flex><span>system
</span></span><span style=display:flex><span><span style=color:#6272a4># 对一些内容的信任</span>
</span></span><span style=display:flex><span>trust
</span></span><span style=display:flex><span><span style=color:#6272a4># 管理磁盘卷</span>
</span></span><span style=display:flex><span>volume
</span></span></code></pre></td></tr></table></div></div><h5 id=2-镜像管理>2 镜像管理<a hidden class=anchor aria-hidden=true href=#2-镜像管理>#</a></h5><h6 id=21-下载镜像>2.1 下载镜像<a hidden class=anchor aria-hidden=true href=#21-下载镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker pull 镜像名:版本号
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 例子，安装最新版本的nginx</span>
</span></span><span style=display:flex><span>docker pull nginx:latest
</span></span><span style=display:flex><span><span style=color:#6272a4># latest可以省略，也可以换成具体的版本号</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=22-查看镜像列表>2.2 查看镜像列表<a hidden class=anchor aria-hidden=true href=#22-查看镜像列表>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker image ls
</span></span><span style=display:flex><span><span style=color:#6272a4># 这个命令可以简写成下面的</span>
</span></span><span style=display:flex><span>docker images
</span></span></code></pre></td></tr></table></div></div><h6 id=23-查看镜像详情>2.3 查看镜像详情<a hidden class=anchor aria-hidden=true href=#23-查看镜像详情>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker image inspect 镜像id
</span></span><span style=display:flex><span><span style=color:#6272a4># 输出的东西很多，重点关注3个，ContainerConfig(容器配置)、GraphDiver(镜像的驱动信息)、RootFS(Docker的文件系统)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[{</span>
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Id&#34;</span>: <span style=color:#f1fa8c>&#34;sha256:448a08f1d2f94e8db6db9286fd77a3a4f3712786583720a12f1648abb8cace25&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;RepoTags&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;nginx:latest&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;RepoDigests&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;nginx@sha256:480868e8c8c797794257e2abd88d0f9a8809b2fe956cbfbc05dcc0bca1f7cd43&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Parent&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Comment&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Created&#34;</span>: <span style=color:#f1fa8c>&#34;2023-05-03T19:51:06.214253945Z&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Container&#34;</span>: <span style=color:#f1fa8c>&#34;a4589847511fc5545db6600740abeb1c991a29ecf9a4b1e3d9b74ae565d373a5&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;ContainerConfig&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Hostname&#34;</span>: <span style=color:#f1fa8c>&#34;a4589847511f&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Domainname&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;User&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;AttachStdin&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;AttachStdout&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;AttachStderr&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#6272a4># 堆外提供服务的端口</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;ExposedPorts&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;80/tcp&#34;</span>: <span style=color:#ff79c6>{}</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Tty&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;OpenStdin&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;StdinOnce&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#6272a4># 环境变量</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Env&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;NGINX_VERSION=1.23.4&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;NJS_VERSION=0.7.11&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;PKG_RELEASE=1~bullseye&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Cmd&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;/bin/sh&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-c&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;#(nop) &#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;CMD [\&#34;nginx\&#34; \&#34;-g\&#34; \&#34;daemon off;\&#34;]&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Image&#34;</span>: <span style=color:#f1fa8c>&#34;sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Volumes&#34;</span>: null,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;WorkingDir&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Entrypoint&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;/docker-entrypoint.sh&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;OnBuild&#34;</span>: null,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Labels&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;maintainer&#34;</span>: <span style=color:#f1fa8c>&#34;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;StopSignal&#34;</span>: <span style=color:#f1fa8c>&#34;SIGQUIT&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;DockerVersion&#34;</span>: <span style=color:#f1fa8c>&#34;20.10.23&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Author&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Config&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Hostname&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Domainname&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;User&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;AttachStdin&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;AttachStdout&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;AttachStderr&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;ExposedPorts&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;80/tcp&#34;</span>: <span style=color:#ff79c6>{}</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Tty&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;OpenStdin&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;StdinOnce&#34;</span>: false,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Env&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;NGINX_VERSION=1.23.4&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;NJS_VERSION=0.7.11&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;PKG_RELEASE=1~bullseye&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Cmd&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;nginx&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-g&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;daemon off;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Image&#34;</span>: <span style=color:#f1fa8c>&#34;sha256:3a939c4944ef49bcf282f201919718dc414fd79c7761fe46ed6cdad1ac2d6564&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Volumes&#34;</span>: null,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;WorkingDir&#34;</span>: <span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Entrypoint&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;/docker-entrypoint.sh&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>]</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;OnBuild&#34;</span>: null,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Labels&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;maintainer&#34;</span>: <span style=color:#f1fa8c>&#34;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;StopSignal&#34;</span>: <span style=color:#f1fa8c>&#34;SIGQUIT&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Architectrue&#34;</span>: <span style=color:#f1fa8c>&#34;amd64&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Os&#34;</span>: <span style=color:#f1fa8c>&#34;linux&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Size&#34;</span>: 142145739,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;VirtualSize&#34;</span>: 142145739,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;GraphDriver&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Data&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;LowerDir&#34;</span>: <span style=color:#f1fa8c>&#34;/var/lib/docker/overlay2/b2960f343512dccb38e75c436996f8b7f0a47117aa8dfc894f73751fcf3ff8ca/diff:/var/lib/docker/overlay2/6bd998edf03367283143c60c70f07288834e85f060116360376ffc9a97c50ea6/diff:/var/lib/docker/overlay2/b8f4d283b2079e0747991c2c494db19982a23a67330f72594de73b7c55e3f07e/diff:/var/lib/docker/overlay2/815ccce85a72931d7932e4376ea55e96368ed15e148f12ce776822a889a7755b/diff:/var/lib/docker/overlay2/829946bb9f068d5fa8421d456d7f5b450747f4a9902846b5ea83e3a6af910b0e/diff&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;MergedDir&#34;</span>: <span style=color:#f1fa8c>&#34;/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/merged&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;UpperDir&#34;</span>: <span style=color:#f1fa8c>&#34;/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/diff&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;WorkDir&#34;</span>: <span style=color:#f1fa8c>&#34;/var/lib/docker/overlay2/69875c1f82c79054f8664b95fb87dba09105f8342899ccf87b248a7f63dddfaf/work&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Name&#34;</span>: <span style=color:#f1fa8c>&#34;overlay2&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;RootFS&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Type&#34;</span>: <span style=color:#f1fa8c>&#34;layers&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;Layers&#34;</span>: <span style=color:#ff79c6>[</span>
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;sha256:8553b91047dad45bedc292812586f1621e0a464a09a7a7c2ce6ac5f8ba2535d7&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;sha256:a29cc9587af6488ae0cbb962ecbe023d347908cc62ca5d715af06e54ccaa9e36&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;sha256:6bc8ae8fb3cf0909b3d9c2e74f6cabe16e6a2322c52cec76fbaecaef47006f1d&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;sha256:5684be535bf11cb9ad1a57b51085f36d84ae8361eabc2b4c2ba9a83e8b084b20&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;sha256:93ee76f39c974e4f819e632149c002d6f509aadc5995ec6523a96b337751c8ed&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;sha256:1040838fe30e6f26d31bde96c514f47ee4bf727b3f1c3c7b045ea3891c1c2150&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>}</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;Metadata&#34;</span>: <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#34;LastTagTime&#34;</span>: <span style=color:#f1fa8c>&#34;0001-01-01T00:00:00Z&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>]</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=24-构建历史>2.4 构建历史<a hidden class=anchor aria-hidden=true href=#24-构建历史>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker image <span style=color:#8be9fd;font-style:italic>history</span> 镜像id
</span></span></code></pre></td></tr></table></div></div><h6 id=25-查看仓库镜像版本>2.5 查看仓库镜像版本<a hidden class=anchor aria-hidden=true href=#25-查看仓库镜像版本>#</a></h6><p>到docker hub上搜索目标镜像，tags栏里有具体的信息。</p><h6 id=26-删除镜像>2.6 删除镜像<a hidden class=anchor aria-hidden=true href=#26-删除镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker image rm 镜像id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 上面的命令可以简写成下面这样</span>
</span></span><span style=display:flex><span>docker rmi 镜像id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 删除所有镜像，正在运行或者被其他容器使用的删不掉</span>
</span></span><span style=display:flex><span>docker rmi <span style=color:#ff79c6>$(</span>docker images -q<span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 删除不在使用的镜像</span>
</span></span><span style=display:flex><span>docker image prune -a
</span></span></code></pre></td></tr></table></div></div><h6 id=27-备份镜像>2.7 备份镜像<a hidden class=anchor aria-hidden=true href=#27-备份镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># -o表示输出到文件</span>
</span></span><span style=display:flex><span>docker save -o nginx.tar nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 和这个对应的是加载镜像</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># -i表示从文件读取</span>
</span></span><span style=display:flex><span>docker image load -i nginx.tar
</span></span></code></pre></td></tr></table></div></div><h6 id=28-导入镜像>2.8 导入镜像<a hidden class=anchor aria-hidden=true href=#28-导入镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 这个命令可以加载本地文件，也可以加载url或者仓库的一个镜像</span>
</span></span><span style=display:flex><span>docker image import nginx.tar
</span></span></code></pre></td></tr></table></div></div><h6 id=29-构建镜像>2.9 构建镜像<a hidden class=anchor aria-hidden=true href=#29-构建镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># -t是指定镜像名和镜像tag</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># .的意思是DockerFile所在路径，相对和绝对路径都可以</span>
</span></span><span style=display:flex><span>docker build -t 镜像名/镜像tag .
</span></span></code></pre></td></tr></table></div></div><h6 id=210-给镜像打tag>2.10 给镜像打tag<a hidden class=anchor aria-hidden=true href=#210-给镜像打tag>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker image tag 源镜像名:源tag 新镜像名:新tag
</span></span></code></pre></td></tr></table></div></div><h6 id=211-推送镜像到远程仓库>2.11 推送镜像到远程仓库<a hidden class=anchor aria-hidden=true href=#211-推送镜像到远程仓库>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker push 镜像名:tag
</span></span></code></pre></td></tr></table></div></div><h5 id=3-容器管理>3 容器管理<a hidden class=anchor aria-hidden=true href=#3-容器管理>#</a></h5><h6 id=31-运行容器>3.1 运行容器<a hidden class=anchor aria-hidden=true href=#31-运行容器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># -i：交互式操作</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># -t：终端</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># -d：守护进程运行</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># -p：设置宿主机和容器端口映射，有了这个才能在外部访问容器的进程</span>
</span></span><span style=display:flex><span>docker run <span style=color:#ff79c6>[</span>--name 名字<span style=color:#ff79c6>]</span> -itd -p 8080:80 nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 这个只能启动已经存在的容器</span>
</span></span><span style=display:flex><span>docker start 容器id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 重启容器</span>
</span></span><span style=display:flex><span>docker restart 容器id
</span></span></code></pre></td></tr></table></div></div><h6 id=32-创建容器>3.2 创建容器<a hidden class=anchor aria-hidden=true href=#32-创建容器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 创建完容器是stop状态</span>
</span></span><span style=display:flex><span>docker create 镜像名:tag
</span></span></code></pre></td></tr></table></div></div><h6 id=33-查看容器列表>3.3 查看容器列表<a hidden class=anchor aria-hidden=true href=#33-查看容器列表>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker container ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 上面可以缩写成这样</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 查看运行中的容器</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 查看所有容器是docker ps -a</span>
</span></span><span style=display:flex><span>docker ps
</span></span></code></pre></td></tr></table></div></div><h6 id=34-停止容器>3.4 停止容器<a hidden class=anchor aria-hidden=true href=#34-停止容器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker stop 容器id
</span></span></code></pre></td></tr></table></div></div><h6 id=35-杀死容器>3.5 杀死容器<a hidden class=anchor aria-hidden=true href=#35-杀死容器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 这个相当于kill -9，一般不用</span>
</span></span><span style=display:flex><span>docker <span style=color:#8be9fd;font-style:italic>kill</span> 容器id
</span></span></code></pre></td></tr></table></div></div><h6 id=36-挂起容器>3.6 挂起容器<a hidden class=anchor aria-hidden=true href=#36-挂起容器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 挂起之后不会释放内存但是不会使用CPU</span>
</span></span><span style=display:flex><span>docker pause 容器id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 解除挂起</span>
</span></span><span style=display:flex><span>docker unpause 容器id
</span></span></code></pre></td></tr></table></div></div><h6 id=37-删除容器>3.7 删除容器<a hidden class=anchor aria-hidden=true href=#37-删除容器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># rm命令不能删除运行中容器，可以使用-f强制删除，一般不会这么勇</span>
</span></span><span style=display:flex><span>docker rm 容器id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 删除没有使用的容器</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 有些容器没有运行，但是还会被其他运行的容器引用。这种是不会被删除的</span>
</span></span><span style=display:flex><span>docker prune
</span></span></code></pre></td></tr></table></div></div><h6 id=38-查看容器日志>3.8 查看容器日志<a hidden class=anchor aria-hidden=true href=#38-查看容器日志>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 和tail命令差不多，-f就是常驻</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># --tail=20显示最后20行</span>
</span></span><span style=display:flex><span>docker logs -f --tail<span style=color:#ff79c6>=</span><span style=color:#bd93f9>20</span> 容器id
</span></span></code></pre></td></tr></table></div></div><h6 id=39-进入容器>3.9 进入容器<a hidden class=anchor aria-hidden=true href=#39-进入容器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># -it表示交互方式</span>
</span></span><span style=display:flex><span>docker <span style=color:#8be9fd;font-style:italic>exec</span> -it 容器id /bin/bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 退出</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>exit</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=310-拷贝容器文件>3.10 拷贝容器文件<a hidden class=anchor aria-hidden=true href=#310-拷贝容器文件>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 把容器文件拷贝到宿主机</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 如果反过来写就是把宿主机文件拷贝到容器</span>
</span></span><span style=display:flex><span>docker cp 容器id:文件位置 目标位置
</span></span></code></pre></td></tr></table></div></div><h6 id=311-重命名>3.11 重命名<a hidden class=anchor aria-hidden=true href=#311-重命名>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker rename 容器id 新name
</span></span></code></pre></td></tr></table></div></div><h6 id=312-查看容器文件系统变化>3.12 查看容器文件系统变化<a hidden class=anchor aria-hidden=true href=#312-查看容器文件系统变化>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker diff 容器id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 结果中C是修改，A是新增，D是删除</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># C /var/cache/nginx</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># A /var/cache/nginx/client_temp</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=313-查看容器信息>3.13 查看容器信息<a hidden class=anchor aria-hidden=true href=#313-查看容器信息>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 查看容器占用的CPU、内存、网络等</span>
</span></span><span style=display:flex><span>docker stats 容器id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 查看容器在宿主机的进程号</span>
</span></span><span style=display:flex><span>docker top 容器id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 查看容器信息，和镜像一样的</span>
</span></span><span style=display:flex><span>docker inspect 容器id
</span></span></code></pre></td></tr></table></div></div><h5 id=4-仓库管理命令>4 仓库管理命令<a hidden class=anchor aria-hidden=true href=#4-仓库管理命令>#</a></h5><h6 id=41-登录docker-hub>4.1 登录docker hub<a hidden class=anchor aria-hidden=true href=#41-登录docker-hub>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker login
</span></span><span style=display:flex><span><span style=color:#6272a4># 然后根据提示输入用户名密码就可以了</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 登出</span>
</span></span><span style=display:flex><span>docker <span style=color:#8be9fd;font-style:italic>logout</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=42-搜索镜像>4.2 搜索镜像<a hidden class=anchor aria-hidden=true href=#42-搜索镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker search 镜像名
</span></span></code></pre></td></tr></table></div></div><h6 id=43-下载镜像>4.3 下载镜像<a hidden class=anchor aria-hidden=true href=#43-下载镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker pull 镜像名:tag
</span></span></code></pre></td></tr></table></div></div><h6 id=44-推送镜像>4.4 推送镜像<a hidden class=anchor aria-hidden=true href=#44-推送镜像>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker push 账号/镜像:tag
</span></span></code></pre></td></tr></table></div></div><h5 id=5-网络命令>5 网络命令<a hidden class=anchor aria-hidden=true href=#5-网络命令>#</a></h5><h5 id=6-存储命令>6 存储命令<a hidden class=anchor aria-hidden=true href=#6-存储命令>#</a></h5><p>docker的数据持久化有3种方式：</p><h6 id=61-volumes>6.1 volumes<a hidden class=anchor aria-hidden=true href=#61-volumes>#</a></h6><p>固定的文件路径，由docker管理，也可以指定volumes在宿主机上的路径。如果不指定docker会默认创建在宿主机上的/var/lib/docker/lolumes/容器id 目录里，这样有个不好的地方就是根据一个镜像启动的多个容器文件不共享，所以一般要给volume创建一个别名，在启动容器时指定volume的别名：</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 创建一个叫test_volume的volume</span>
</span></span><span style=display:flex><span>docker volume create test_volume
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 启动容器，把/usr/share/nginx/html目录挂载到刚刚创建的volume上</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># -v和--volume是等效的</span>
</span></span><span style=display:flex><span>docker run -itd --name nginx_1 -p 8080:80 -v ruyuan_volume:/usr/share/nginx/html 镜像名:tag
</span></span></code></pre></td></tr></table></div></div><p>使用-v时，如果宿主机目录不存在会自动创建。</p><p>volume的管理命令：</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 查看test_volume详情</span>
</span></span><span style=display:flex><span>docker inspect test_volume
</span></span><span style=display:flex><span><span style=color:#6272a4># 查看volume列表</span>
</span></span><span style=display:flex><span>docker volume ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 删除volume相关</span>
</span></span><span style=display:flex><span>docker volume prune
</span></span><span style=display:flex><span>docker volume rm
</span></span></code></pre></td></tr></table></div></div><h6 id=62-bind-mount>6.2 bind mount<a hidden class=anchor aria-hidden=true href=#62-bind-mount>#</a></h6><p>挂载到宿主机的其他目录使用方式也是-v或者&ndash;volume：</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># /data/nginx/是宿主机中的路径，必须是绝对路径</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># /usr/share/nginx/html表示容器中被挂载的路径</span>
</span></span><span style=display:flex><span>docker run -itd --name 容器别名 -v /data/nginx/:/usr/share/nginx/html 镜像名:tag
</span></span></code></pre></td></tr></table></div></div><p>另一种挂载的方式是使用&ndash;mount：</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># source表示宿主机中路径</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># destination表示容器中被挂载的路径</span>
</span></span><span style=display:flex><span>docker run -itd --name 容器别名 --mount <span style=color:#8be9fd;font-style:italic>type</span><span style=color:#ff79c6>=</span>bind,source<span style=color:#ff79c6>=</span>/data/nginx,destination<span style=color:#ff79c6>=</span>/usr/share/nginx 镜像名:tag
</span></span></code></pre></td></tr></table></div></div><p><em>使用&ndash;mount时不指定type是使用volume方式存储</em>，当source路径不存在时会报错。</p><h6 id=63-tmpfs-mounts>6.3 tmpfs mounts<a hidden class=anchor aria-hidden=true href=#63-tmpfs-mounts>#</a></h6><p>存放到宿主机内存中。</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># /usr/share/nginx/html表示容器中被挂载的目录</span>
</span></span><span style=display:flex><span>docker run -itd --name 容器别名 --tmpfs /usr/share/nginx/html 镜像名:tag
</span></span></code></pre></td></tr></table></div></div><p>这种方式因为读写是在内存，所以速度特别快。</p><h3 id=二-docker-file>二 Docker File<a hidden class=anchor aria-hidden=true href=#二-docker-file>#</a></h3><p>docker file是用来构建镜像的文件，使用<code>docker build</code>命令将docker file文件构建成镜像：</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># .表示上下文路径，构建时会把这个路径里的文件打包给docker容器，所以这个里面不要有多余的文件</span>
</span></span><span style=display:flex><span>docker build -t 镜像名:tag --file file文件路径 .
</span></span></code></pre></td></tr></table></div></div><h5 id=1-docker-file-命令>1 docker file 命令：<a hidden class=anchor aria-hidden=true href=#1-docker-file-命令>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#6272a4># 必须以FROM开头</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># FROM定义了这个镜像的构建是基于哪个基础镜像</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># FROM命令可以多次使用</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>FROM</span> <span style=color:#f1fa8c>nginx</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 指定镜像的作者</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>MAINTAINER</span> <span style=color:#f1fa8c>xiaohong</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 执行shell或者exec的命令</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># RUN可以有多个，但是每次执行RUN都会让镜像多加一层，可以使用&amp;&amp;拼接命令，这样只会打包一层</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>RUN</span> <span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#f1fa8c>&#39; nginx &#39;</span> &gt; /usr/share/nginx/html/index.html ADD Dockfile ContainerDockfile
</span></span><span style=display:flex><span><span style=color:#6272a4># 和RUN一样，不过RUN是在build的时候运行，CMD在docker run命令执行时运行</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># CMD只会执行一次，最后面的CMD会把前面的覆盖</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>CMD</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 类似CMD，可以接收启动镜像时的参数作为输入，也只能存在一个ENTRYPOINT命令</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>ENTRYPOINT</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 指定RUN、CMD、ENTRYPOINT的工作目录</span>
</span></span><span style=display:flex><span>WORKDIR
</span></span><span style=display:flex><span><span style=color:#6272a4># 复制文件到镜像中</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># source表示宿主机中的文件路径，destination是容器中的路径</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>ADD</span> <span style=color:#8be9fd;font-style:italic>source</span> destination
</span></span><span style=display:flex><span><span style=color:#6272a4># 和ADD类似，ADD不能复制tar这种压缩文件，但是他自己会先解压，不过也会影响速度，推荐使用COPY</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>COPY</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 指定容器运行时监听的端口</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>EXPOSE</span> <span style=color:#f1fa8c>8080</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 定义环境变量，后续的指令都可以使用这个变量</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>ENV</span> &lt;key1&gt;<span style=color:#ff79c6>=</span>&lt;value1&gt; &lt;key2&gt;<span style=color:#ff79c6>=</span>&lt;value2&gt;...
</span></span><span style=display:flex><span><span style=color:#6272a4># 设置挂载的宿主机路径</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>VOLUME</span> <span style=color:#f1fa8c>/usr/share/docker</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 指定执行后续命令的用户和用户组</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>USER</span> <span style=color:#f1fa8c>用户名[:用户组</span><span style=color:#ff79c6>]</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=2-查看镜像的构建记录>2 查看镜像的构建记录：<a hidden class=anchor aria-hidden=true href=#2-查看镜像的构建记录>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker <span style=color:#8be9fd;font-style:italic>history</span> ae893c58d83f --no-trunc
</span></span></code></pre></td></tr></table></div></div><h5 id=3-file例子>3 file例子<a hidden class=anchor aria-hidden=true href=#3-file例子>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#ff79c6>FROM</span> <span style=color:#f1fa8c>openjdk:8</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>COPY</span> ./src /home/xiaohong/src 
</span></span><span style=display:flex><span><span style=color:#ff79c6>WORKDIR</span> <span style=color:#f1fa8c>/home/xiaohong/src</span> 
</span></span><span style=display:flex><span><span style=color:#ff79c6>RUN</span> <span style=color:#8be9fd;font-style:italic>cd</span> /home/xiaohong/src 
</span></span><span style=display:flex><span><span style=color:#ff79c6>RUN</span> ls
</span></span><span style=display:flex><span><span style=color:#ff79c6>RUN</span> javac Main.java
</span></span></code></pre></td></tr></table></div></div><p>构建并上传：</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker build -t my-java-app .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 先登录到远程仓库</span>
</span></span><span style=display:flex><span>docker login
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 打tag</span>
</span></span><span style=display:flex><span>docker tag my-java-app v1.0.0
</span></span><span style=display:flex><span><span style=color:#6272a4># 推送到远程仓库</span>
</span></span><span style=display:flex><span>docker image push my-java-app:v1.0.0
</span></span></code></pre></td></tr></table></div></div><h3 id=三-docker-compose>三 Docker Compose<a hidden class=anchor aria-hidden=true href=#三-docker-compose>#</a></h3><p>docker compose是用来定义和运行多容器的工具，可以在yml中配置所有需要的命令，然后执行一个命令运行所有容器。</p><h5 id=1-常用yml指令>1 常用yml指令<a hidden class=anchor aria-hidden=true href=#1-常用yml指令>#</a></h5><ol><li>version：指定compose版本，比如1.2.x、3.x，目前主流的是3.x，他支持docker1.13及以上版本。</li><li>services：定义所有的service信息，service下面的第一级的key就是service的名称。</li><li>build：指定docker file所在的文件夹路径或者指定具体的docker file。</li><li>image：指定服务使用的镜像。</li><li>ports：定义宿主机和容器端口的映射。</li><li>expose：指定容器用到的端口，并不对外暴露，而ports映射之后可以在外面访问。</li><li>volumes：把宿主机的目录挂载到容器里，可以自定义volume的名称，也可以直接使用路径。</li><li>depends_on：设置依赖关系，使用<code>docker-compose up</code>启动时会先启动依赖的服务。</li><li>restart：默认no，可以设置成always，这样docker重启时容器也会重启。</li><li>networks：指定容器的网络。</li><li>environment：添加环境变量，需要注意boolean值要用单引号括起来，要不会被yml解析器解析成True或者False。</li><li>command：替换容器启动的默认命令。</li><li>container_name：指定容器名。</li><li>healthcheck：检测docker服务是否在健康运行。</li><li>extends：继承某个compose文件。</li></ol><h5 id=2-docker-compose命令>2 docker-compose命令<a hidden class=anchor aria-hidden=true href=#2-docker-compose命令>#</a></h5><p>使用docker-compose命令时不指定yml文件会在当前目录里查找docker-compose.yml文件。</p><h6 id=21-容器声明周期>2.1 容器声明周期<a hidden class=anchor aria-hidden=true href=#21-容器声明周期>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 创建或启动容器</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># -d表示后台运行</span>
</span></span><span style=display:flex><span>docker-compose -f docker-compose文件路径 up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 停止并删除容器</span>
</span></span><span style=display:flex><span>docker-compose -f docker-compose文件路径 down
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 停止容器</span>
</span></span><span style=display:flex><span>docker-compose -f docker-compose文件路径 stop
</span></span></code></pre></td></tr></table></div></div><h6 id=22-查看进程信息>2.2 查看进程信息<a hidden class=anchor aria-hidden=true href=#22-查看进程信息>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># 打印docker-compose文件中所有服务的进程信息</span>
</span></span><span style=display:flex><span>docker-compose -f docker-compose文件路径 top
</span></span></code></pre></td></tr></table></div></div><h6 id=23-查看容器日志>2.3 查看容器日志<a hidden class=anchor aria-hidden=true href=#23-查看容器日志>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># -f表示追加打印</span>
</span></span><span style=display:flex><span>docker-compose -f docker-compose文件路径 logs -f
</span></span></code></pre></td></tr></table></div></div><h5 id=3-个人开发环境docker-composeyml>3 个人开发环境docker-compose.yml<a hidden class=anchor aria-hidden=true href=#3-个人开发环境docker-composeyml>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ff79c6>version</span>: <span style=color:#f1fa8c>&#39;3.9&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://wangxiaohong123.github.io/tags/%E6%9E%B6%E6%9E%84/>架构</a></li></ul><nav class=paginav><a class=prev href=https://wangxiaohong123.github.io/posts/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E4%BA%91%E5%8E%9F%E7%94%9F/5.istio/><span class=title>« Prev</span><br><span>云原生-5.Istio</span>
</a><a class=next href=https://wangxiaohong123.github.io/posts/%E5%9F%BA%E7%A1%80/%E7%AE%97%E6%B3%95/leecode/30.%E6%9C%89%E6%95%88%E7%9A%84%E6%95%B0%E7%8B%AC/><span class=title>Next »</span><br><span>30.有效的数独</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 云原生-3.容器命令 on x" href="https://x.com/intent/tweet/?text=%e4%ba%91%e5%8e%9f%e7%94%9f-3.%e5%ae%b9%e5%99%a8%e5%91%bd%e4%bb%a4&amp;url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f&amp;hashtags=%e6%9e%b6%e6%9e%84"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云原生-3.容器命令 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f&amp;title=%e4%ba%91%e5%8e%9f%e7%94%9f-3.%e5%ae%b9%e5%99%a8%e5%91%bd%e4%bb%a4&amp;summary=%e4%ba%91%e5%8e%9f%e7%94%9f-3.%e5%ae%b9%e5%99%a8%e5%91%bd%e4%bb%a4&amp;source=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云原生-3.容器命令 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f&title=%e4%ba%91%e5%8e%9f%e7%94%9f-3.%e5%ae%b9%e5%99%a8%e5%91%bd%e4%bb%a4"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云原生-3.容器命令 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云原生-3.容器命令 on whatsapp" href="https://api.whatsapp.com/send?text=%e4%ba%91%e5%8e%9f%e7%94%9f-3.%e5%ae%b9%e5%99%a8%e5%91%bd%e4%bb%a4%20-%20https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云原生-3.容器命令 on telegram" href="https://telegram.me/share/url?text=%e4%ba%91%e5%8e%9f%e7%94%9f-3.%e5%ae%b9%e5%99%a8%e5%91%bd%e4%bb%a4&amp;url=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 云原生-3.容器命令 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e4%ba%91%e5%8e%9f%e7%94%9f-3.%e5%ae%b9%e5%99%a8%e5%91%bd%e4%bb%a4&u=https%3a%2f%2fwangxiaohong123.github.io%2fposts%2f%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%2f%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2f3.%25E5%25AE%25B9%25E5%2599%25A8%25E5%2591%25BD%25E4%25BB%25A4%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://wangxiaohong123.github.io/>王小红的笔记</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>